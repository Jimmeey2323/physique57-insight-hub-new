var Us=Object.defineProperty,zs=Object.defineProperties;var Bs=Object.getOwnPropertyDescriptors;var is=Object.getOwnPropertySymbols;var Ks=Object.prototype.hasOwnProperty,Vs=Object.prototype.propertyIsEnumerable;var os=(x,n,S)=>n in x?Us(x,n,{enumerable:!0,configurable:!0,writable:!0,value:S}):x[n]=S,he=(x,n)=>{for(var S in n||(n={}))Ks.call(n,S)&&os(x,S,n[S]);if(is)for(var S of is(n))Vs.call(n,S)&&os(x,S,n[S]);return x},Ce=(x,n)=>zs(x,Bs(n));import{r as j,j as e,F as Se,X as He,C as Hs,b as oe,c as U,U as J,d as Cs,T as V,e as ve,f as ne,H as _s,S as ks,G as qs,L as Ys,D as Gs,g as Te,M as $e,h as Ae,i as be,R as Me,k as Le,l as Xs,m as Q,n as Z,o as Js,B as _e,P as Ss,p as Qs,q as Zs,s as qe,t as ea,u as Ts,E as As,v as sa,w as aa,x as ta,y as ds,z as la,I as na}from"./react-vendor-BrAkf1Ej.js";import{C as K,a as Rs,b as Ds,c as B,B as k,d as M,e as Fs,L as ie,D as ra,S as ue,f as ge,g as pe,h as je,i as H,I as Ms,j as ae,k as re,l as ca,T as Oe,m as Pe,n as se,o as D,p as Ie,q as d,r as Ye,s as Ge,t as te,u as le,v as Xe,w as _,x as q,y as Y,z as Je,A as Qe,E as Ze,F as es,G as xs,H as De,P as Ee,J as Ue,K as ze,M as ms,N as ia,O as oa,Q as da,R as xa,U as ma,V as ha,W as ua,X as ga}from"./ui-components-_bEsYxhv.js";import{g as hs,f as X,a as Be,b as Ke,c as E,u as Ls,d as $s,e as pa,h as ke}from"./utils-hni-AijI.js";import{L as ja,M as ba,D as Na,a as va}from"./dashboard-misc-Bo2H3bQp.js";import{m as P,A as ya}from"./animation-vendor-Cz-8KeDB.js";import{I as fa}from"./dashboard-trainers-1pu3sYhx.js";import{R as us,L as wa,C as gs,X as ps,Y as js,T as bs,a as Ns,b as Ve,B as Ca,c as vs}from"./chart-vendor-CfJT7qML.js";import{t as ka,c as Sa,f as ys}from"./utils-vendor-J2la9FRB.js";function ee(...x){return ka(Sa(x))}const Os=j.createContext(void 0),Ps=()=>{const x=j.useContext(Os);if(!x)throw new Error("useSessionsFilters must be used within a SessionsFiltersProvider");return x},Ha=({children:x})=>{const[n,S]=j.useState(()=>{const p=hs();return{trainers:[],classTypes:[],dayOfWeek:[],timeSlots:[],dateRange:{start:new Date(p.start),end:new Date(p.end)}}}),y=p=>{S(g=>he(he({},g),p))},R=()=>{const p=hs();S({trainers:[],classTypes:[],dayOfWeek:[],timeSlots:[],dateRange:{start:new Date(p.start),end:new Date(p.end)}})},t=R;return e.jsx(Os.Provider,{value:{filters:n,updateFilters:y,clearFilters:R,clearAllFilters:t},children:x})},Ta=({data:x})=>{var r;const{filters:n,updateFilters:S,clearAllFilters:y}=Ps(),[R,t]=j.useState(!1),[p,g]=j.useState(2),N=j.useMemo(()=>{const s=[...new Set(x.map(w=>w.trainerName))].filter(Boolean).sort(),l=[...new Set(x.map(w=>w.cleanedClass))].filter(Boolean).sort(),o=[...new Set(x.map(w=>w.dayOfWeek))].filter(Boolean).sort(),A=[...new Set(x.map(w=>w.time))].filter(Boolean).sort(),v=[...new Set(x.map(w=>w.location))].filter(Boolean).sort(),F=[...new Set(x.map(w=>w.cleanedClass||w.classType))].filter(Boolean).sort();return{trainers:s,classTypes:l,dayOfWeek:o,timeSlots:A,locations:v,formats:F}},[x]),T=n.trainers.length>0||n.classTypes.length>0||n.dayOfWeek.length>0||n.timeSlots.length>0||n.dateRange.start||n.dateRange.end||p>1,L=[n.trainers.length,n.classTypes.length,n.dayOfWeek.length,n.timeSlots.length,n.dateRange.start?1:0,n.dateRange.end?1:0,p>1?1:0].filter(s=>s>0).length,h=()=>{y(),g(2)};return e.jsx(K,{className:"bg-white/95 backdrop-blur-sm border-0 shadow-xl mb-8 overflow-hidden",children:e.jsxs(Rs,{open:R,onOpenChange:t,children:[e.jsx(Ds,{asChild:!0,children:e.jsx(B,{className:"p-6 cursor-pointer hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-purple-50/50 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 shadow-lg",children:e.jsx(Se,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-gray-800",children:"Advanced Class Analytics Filters"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure comprehensive filters to analyze class performance and attendance patterns"})]}),T&&e.jsxs(k,{variant:"secondary",className:"bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 border-blue-200 px-3 py-1 text-sm font-semibold",children:[L," active filters"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[T&&e.jsxs(M,{variant:"outline",size:"sm",onClick:s=>{s.stopPropagation(),h()},className:"gap-2 hover:bg-red-50 hover:border-red-200 hover:text-red-700 transition-colors font-medium",children:[e.jsx(He,{className:"w-4 h-4"}),"Clear All Filters"]}),e.jsx("div",{className:"p-2 rounded-lg bg-gray-100 transition-transform duration-200",children:R?e.jsx(Hs,{className:"w-5 h-5 text-gray-600"}):e.jsx(oe,{className:"w-5 h-5 text-gray-600"})})]})]})})}),e.jsx(Fs,{children:e.jsxs(B,{className:"px-6 pb-6 pt-0 border-t border-gray-100 bg-gradient-to-br from-gray-50/30 to-white",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ie,{className:"text-sm font-bold flex items-center gap-2 text-gray-700",children:[e.jsx(U,{className:"w-4 h-4 text-blue-500"}),"Date Range"]}),e.jsx(ra,{value:{from:n.dateRange.start?new Date(n.dateRange.start):void 0,to:n.dateRange.end?new Date(n.dateRange.end):void 0},onChange:s=>S({dateRange:{start:(s==null?void 0:s.from)||null,end:(s==null?void 0:s.to)||null}}),className:"w-full border-gray-200 hover:border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ie,{className:"text-sm font-bold flex items-center gap-2 text-gray-700",children:[e.jsx(J,{className:"w-4 h-4 text-purple-500"}),"Trainers (",n.trainers.length," selected)"]}),e.jsxs(ue,{value:n.trainers.length===0?"all-trainers":n.trainers[0],onValueChange:s=>S({trainers:s==="all-trainers"?[]:[s]}),children:[e.jsx(ge,{className:"w-full border-gray-200 hover:border-gray-300 shadow-sm",children:e.jsx(pe,{placeholder:"Select trainers..."})}),e.jsxs(je,{className:"max-h-60",children:[e.jsx(H,{value:"all-trainers",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"All Trainers"]})}),N.trainers.map(s=>e.jsx(H,{value:s,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"w-4 h-4"}),s]})},s))]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ie,{className:"text-sm font-bold flex items-center gap-2 text-gray-700",children:[e.jsx(V,{className:"w-4 h-4 text-green-500"}),"Class Formats (",n.classTypes.length," selected)"]}),e.jsxs(ue,{value:n.classTypes.length===0?"all-formats":n.classTypes[0],onValueChange:s=>S({classTypes:s==="all-formats"?[]:[s]}),children:[e.jsx(ge,{className:"w-full border-gray-200 hover:border-gray-300 shadow-sm",children:e.jsx(pe,{placeholder:"Select class formats..."})}),e.jsxs(je,{className:"max-h-60",children:[e.jsx(H,{value:"all-formats",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),"All Formats"]})}),N.formats.map(s=>e.jsx(H,{value:s,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"}),s]})},s))]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ie,{className:"text-sm font-bold flex items-center gap-2 text-gray-700",children:[e.jsx(U,{className:"w-4 h-4 text-orange-500"}),"Day of Week (",n.dayOfWeek.length," selected)"]}),e.jsxs(ue,{value:n.dayOfWeek.length===0?"all-days":n.dayOfWeek[0],onValueChange:s=>S({dayOfWeek:s==="all-days"?[]:[s]}),children:[e.jsx(ge,{className:"w-full border-gray-200 hover:border-gray-300 shadow-sm",children:e.jsx(pe,{placeholder:"Select days..."})}),e.jsxs(je,{children:[e.jsx(H,{value:"all-days",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"All Days"]})}),N.dayOfWeek.map(s=>e.jsx(H,{value:s,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),s]})},s))]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ie,{className:"text-sm font-bold flex items-center gap-2 text-gray-700",children:[e.jsx(ne,{className:"w-4 h-4 text-red-500"}),"Time Slots (",n.timeSlots.length," selected)"]}),e.jsxs(ue,{value:n.timeSlots.length===0?"all-times":n.timeSlots[0],onValueChange:s=>S({timeSlots:s==="all-times"?[]:[s]}),children:[e.jsx(ge,{className:"w-full border-gray-200 hover:border-gray-300 shadow-sm",children:e.jsx(pe,{placeholder:"Select time slots..."})}),e.jsxs(je,{className:"max-h-60",children:[e.jsx(H,{value:"all-times",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"All Time Slots"]})}),N.timeSlots.map(s=>e.jsx(H,{value:s,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),s]})},s))]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ie,{className:"text-sm font-bold flex items-center gap-2 text-gray-700",children:[e.jsx(_s,{className:"w-4 h-4 text-indigo-500"}),"Min Classes Criteria"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ms,{type:"number",value:p,onChange:s=>g(Math.max(1,parseInt(s.target.value)||1)),min:"1",max:"50",className:"w-full border-gray-200 hover:border-gray-300 shadow-sm",placeholder:"Minimum sessions"}),e.jsx(k,{variant:"outline",className:"text-xs whitespace-nowrap",children:"sessions"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Classes with fewer sessions will be excluded"})]}),e.jsxs("div",{className:"space-y-3 md:col-span-2 xl:col-span-1",children:[e.jsxs(ie,{className:"text-sm font-bold flex items-center gap-2 text-gray-700",children:[e.jsx(Se,{className:"w-4 h-4 text-blue-500"}),"Quick Actions"]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{const s=new Date,l=new Date(s.getFullYear(),s.getMonth(),1);S({dateRange:{start:l,end:s}})},className:"justify-start gap-2 text-xs",children:[e.jsx(U,{className:"w-3 h-3"}),"Current Month"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{const s=new Date,l=new Date(s.getFullYear(),s.getMonth()-1,1),o=new Date(s.getFullYear(),s.getMonth(),0);S({dateRange:{start:l,end:o}})},className:"justify-start gap-2 text-xs",children:[e.jsx(U,{className:"w-3 h-3"}),"Last Month"]})]})]})]}),T&&e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Active Filters Summary:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.dateRange.start&&e.jsxs(k,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:["Date: ",n.dateRange.start.toLocaleDateString()," - ",((r=n.dateRange.end)==null?void 0:r.toLocaleDateString())||"Present"]}),n.trainers.length>0&&e.jsxs(k,{variant:"secondary",className:"bg-purple-100 text-purple-800",children:["Trainers: ",n.trainers.length]}),n.classTypes.length>0&&e.jsxs(k,{variant:"secondary",className:"bg-green-100 text-green-800",children:["Formats: ",n.classTypes.length]}),n.dayOfWeek.length>0&&e.jsxs(k,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:["Days: ",n.dayOfWeek.length]}),n.timeSlots.length>0&&e.jsxs(k,{variant:"secondary",className:"bg-red-100 text-red-800",children:["Times: ",n.timeSlots.length]}),p>1&&e.jsxs(k,{variant:"secondary",className:"bg-indigo-100 text-indigo-800",children:["Min Classes: ",p,"+"]})]})]})]})})]})})},Aa=({data:x,location:n,onDrillDown:S})=>{const[y,R]=j.useState("grouped"),[t,p]=j.useState("trainer"),[g,N]=j.useState(""),[T,L]=j.useState(!1),[h,r]=j.useState(new Set),[s,l]=j.useState(1),[o,A]=j.useState(25),[v,F]=j.useState({key:"trainer",direction:"asc"}),w=j.useMemo(()=>x.map(i=>{const m=new Date(i.date),C=`${m.toLocaleDateString("en-US",{month:"short"})}-${m.getFullYear().toString().slice(-2)}`;return Ce(he({},i),{period:C,emptyClasses:(i.checkedInCount||0)===0?1:0,nonEmptyClasses:(i.checkedInCount||0)>0?1:0,avgAll:i.checkedInCount||0,avgNonEmpty:(i.checkedInCount||0)>0&&i.checkedInCount||0,lateCancels:i.lateCancelledCount||0,payout:0,tips:0})}),[x]),b=j.useMemo(()=>{if(y==="flat"||t==="none")return[];const i=new Map;return w.forEach(m=>{let C="";switch(t){case"trainer":C=m.trainerName||"Unknown",m.trainerName;break;case"class":C=m.cleanedClass||"Unknown",m.cleanedClass;break;case"location":C=m.location||"Unknown",m.location;break;case"day_time":C=`${m.dayOfWeek}-${m.time}`,`${m.dayOfWeek}${m.time}`;break;case"trainer_class":C=`${m.trainerName}-${m.cleanedClass}`,`${m.trainerName}${m.cleanedClass}`;break;default:C="all"}i.has(C)||i.set(C,[]),i.get(C).push(m)}),Array.from(i.entries()).map(([m,C])=>{var ss,as,ts,ls,ns,rs,cs;const G=C.length,ce=C.filter(me=>(me.checkedInCount||0)===0).length,de=G-ce,fe=C.reduce((me,we)=>me+(we.checkedInCount||0),0),I=G>0?fe/G:0,W=de>0?fe/de:0,Is=C.reduce((me,we)=>me+(we.totalPaid||0),0),Ws=C.reduce((me,we)=>me+(we.lateCancelledCount||0),0),We=((ss=C[0])==null?void 0:ss.trainerName)||"Unknown",Es=((as=C[0])==null?void 0:as.period)||"Unknown";let xe="";switch(t){case"trainer":xe=We||"Unknown Trainer";break;case"class":xe=((ts=C[0])==null?void 0:ts.cleanedClass)||"Unknown Class";break;case"location":xe=((ls=C[0])==null?void 0:ls.location)||"Unknown Location";break;case"day_time":xe=`${(ns=C[0])==null?void 0:ns.dayOfWeek} ${(rs=C[0])==null?void 0:rs.time}`;break;case"trainer_class":xe=`${We} - ${(cs=C[0])==null?void 0:cs.cleanedClass}`;break;default:xe="All Sessions"}return{groupKey:m,groupLabel:xe,trainer:We,period:Es,sessions:C,aggregatedMetrics:{totalClasses:G,emptyClasses:ce,nonEmptyClasses:de,totalCheckedIn:fe,avgAll:I,avgNonEmpty:W,totalRevenue:Is,totalLateCancels:Ws,totalPayout:0,totalTips:0},isExpanded:h.has(m)||T}}).sort((m,C)=>v.direction==="asc"?m.trainer.localeCompare(C.trainer):C.trainer.localeCompare(m.trainer))},[w,t,y,h,T,v]),a=j.useMemo(()=>{if(!g)return y==="grouped"?b:w;const i=g.toLowerCase();return y==="grouped"?b.filter(m=>m.trainer.toLowerCase().includes(i)||m.groupLabel.toLowerCase().includes(i)||m.sessions.some(C=>(C.cleanedClass||"").toLowerCase().includes(i)||(C.location||"").toLowerCase().includes(i))):w.filter(m=>(m.trainerName||"").toLowerCase().includes(i)||(m.cleanedClass||"").toLowerCase().includes(i)||(m.location||"").toLowerCase().includes(i))},[b,w,g,y]),c=j.useMemo(()=>{const i=(s-1)*o;return a.slice(i,i+o)},[a,s,o]),f=Math.ceil(a.length/o),u=j.useCallback(i=>{r(m=>{const C=new Set(m);return C.has(i)?C.delete(i):C.add(i),C})},[]),O=j.useCallback(()=>{if(L(i=>!i),T)r(new Set);else{const i=b.map(m=>m.groupKey);r(new Set(i))}},[T,b]),z=j.useCallback(i=>{F(m=>({key:i,direction:m.key===i&&m.direction==="desc"?"asc":"desc"}))},[]),$=i=>v.key!==i?e.jsx("div",{className:"w-4 h-4"}):v.direction==="asc"?e.jsx(Q,{className:"w-4 h-4 text-blue-600"}):e.jsx(Z,{className:"w-4 h-4 text-blue-600"}),Ne=i=>new Date(i).toLocaleDateString("en-CA"),ye=({name:i})=>{const m=i.split(" ").map(ce=>ce.charAt(0)).join("").substring(0,2).toUpperCase(),C=["bg-blue-500","bg-green-500","bg-purple-500","bg-red-500","bg-yellow-500","bg-indigo-500","bg-pink-500","bg-teal-500"],G=i.split("").reduce((ce,de)=>ce+de.charCodeAt(0),0)%C.length;return e.jsx("div",{className:ee("w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-medium",C[G]),children:m})},Re=({type:i,count:m})=>{const C=G=>G.toLowerCase().includes("barre")?"bg-pink-100 text-pink-800 border-pink-200":G.toLowerCase().includes("cardio")?"bg-red-100 text-red-800 border-red-200":G.toLowerCase().includes("power")?"bg-orange-100 text-orange-800 border-orange-200":G.toLowerCase().includes("recovery")?"bg-green-100 text-green-800 border-green-200":"bg-blue-100 text-blue-800 border-blue-200";return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:ee("text-xs font-medium px-2 py-1",C(i)),children:i}),m&&m>1&&e.jsx(k,{variant:"secondary",className:"text-xs",children:m})]})};return e.jsxs(K,{className:"w-full bg-white shadow-lg border-0 rounded-xl overflow-hidden",children:[e.jsxs(ae,{className:"border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx(re,{className:"text-2xl font-bold text-slate-900 mb-2",children:"Class Analytics Dashboard"}),e.jsx("p",{className:"text-slate-600",children:"Comprehensive view of your class performance data"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold text-slate-900",children:x.length}),e.jsx("div",{className:"text-sm text-slate-500",children:"Total Records"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1 min-w-[300px]",children:[e.jsx(ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(Ms,{placeholder:"Search classes, trainers, locations...",value:g,onChange:i=>N(i.target.value),className:"pl-10 bg-white border-slate-200"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"w-4 h-4 text-slate-500"}),e.jsxs(ue,{value:t,onValueChange:i=>p(i),children:[e.jsx(ge,{className:"w-[200px] bg-white border-slate-200",children:e.jsx(pe,{})}),e.jsxs(je,{children:[e.jsx(H,{value:"trainer",children:"Trainer"}),e.jsx(H,{value:"class",children:"Class Type"}),e.jsx(H,{value:"location",children:"Location"}),e.jsx(H,{value:"day_time",children:"Day + Time"}),e.jsx(H,{value:"trainer_class",children:"Trainer + Class"}),e.jsx(H,{value:"none",children:"No Grouping"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 rounded-lg p-1",children:[e.jsxs(M,{variant:y==="grouped"?"default":"ghost",size:"sm",onClick:()=>R("grouped"),className:"flex items-center gap-2",children:[e.jsx(qs,{className:"w-4 h-4"}),"Grouped"]}),e.jsxs(M,{variant:y==="flat"?"default":"ghost",size:"sm",onClick:()=>R("flat"),className:"flex items-center gap-2",children:[e.jsx(Ys,{className:"w-4 h-4"}),"Flat"]})]}),y==="grouped"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ca,{id:"expand-all",checked:T,onCheckedChange:O}),e.jsx(ie,{htmlFor:"expand-all",className:"text-sm font-medium text-slate-700",children:"Expand All"})]}),e.jsxs(M,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"w-4 h-4"}),"Export CSV"]})]})]}),e.jsxs(B,{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto max-h-[600px]",children:e.jsxs(Oe,{children:[e.jsx(Pe,{className:"sticky top-0 z-10",children:e.jsxs(se,{className:"bg-slate-100 border-b-2 border-slate-300 shadow-sm",children:[e.jsx(D,{className:"font-bold text-slate-900 cursor-pointer hover:text-blue-600 transition-colors w-[120px] bg-slate-100 sticky top-0",onClick:()=>z("trainer"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"w-4 h-4"}),"TRAINER",$("trainer")]})}),e.jsx(D,{className:"font-bold text-slate-900 cursor-pointer hover:text-blue-600 transition-colors w-[80px] bg-slate-100 sticky top-0",onClick:()=>z("period"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"PERIOD",$("period")]})}),e.jsx(D,{className:"font-bold text-slate-900 cursor-pointer hover:text-blue-600 transition-colors w-[100px] bg-slate-100 sticky top-0",onClick:()=>z("date"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"DATE",$("date")]})}),e.jsx(D,{className:"font-bold text-slate-900 cursor-pointer hover:text-blue-600 transition-colors w-[150px] bg-slate-100 sticky top-0",onClick:()=>z("classType"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4"}),"CLASS TYPE",$("classType")]})}),e.jsx(D,{className:"font-bold text-slate-900 cursor-pointer hover:text-blue-600 transition-colors w-[90px] bg-slate-100 sticky top-0",onClick:()=>z("day"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"DAY",$("day")]})}),e.jsx(D,{className:"font-bold text-slate-900 cursor-pointer hover:text-blue-600 transition-colors w-[80px] bg-slate-100 sticky top-0",onClick:()=>z("time"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"TIME",$("time")]})}),e.jsx(D,{className:"font-bold text-slate-900 cursor-pointer hover:text-blue-600 transition-colors w-[150px] bg-slate-100 sticky top-0",onClick:()=>z("location"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4"}),"LOCATION",$("location")]})}),e.jsx(D,{className:"font-bold text-slate-900 text-center w-[70px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(ve,{className:"w-4 h-4"}),"CLASSES"]})}),e.jsx(D,{className:"font-bold text-slate-900 text-center w-[70px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(V,{className:"w-4 h-4 text-red-500"}),"EMPTY"]})}),e.jsx(D,{className:"font-bold text-slate-900 text-center w-[80px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(V,{className:"w-4 h-4 text-green-500"}),"NON-EMPTY"]})}),e.jsx(D,{className:"font-bold text-slate-900 text-center w-[80px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(J,{className:"w-4 h-4"}),"CHECKED IN"]})}),e.jsx(D,{className:"font-bold text-slate-900 text-center w-[80px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(Te,{className:"w-4 h-4"}),"AVG. (ALL)"]})}),e.jsx(D,{className:"font-bold text-slate-900 text-center w-[90px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(Ae,{className:"w-4 h-4"}),"AVG. (NON-EMPTY)"]})}),e.jsx(D,{className:"font-bold text-slate-900 text-center w-[100px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(be,{className:"w-4 h-4"}),"REVENUE"]})}),e.jsx(D,{className:"font-bold text-slate-900 text-center w-[90px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(ne,{className:"w-4 h-4 text-orange-500"}),"LATE CANCELS"]})}),e.jsx(D,{className:"font-bold text-slate-900 text-center w-[80px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(be,{className:"w-4 h-4 text-green-600"}),"PAYOUT"]})}),e.jsx(D,{className:"font-bold text-slate-900 text-center w-[70px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(be,{className:"w-4 h-4 text-yellow-600"}),"TIPS"]})})]})}),e.jsx(Ie,{children:y==="grouped"?c.map(i=>e.jsxs(Me.Fragment,{children:[e.jsxs(se,{className:"bg-slate-100 hover:bg-slate-200 transition-colors border-l-4 border-l-blue-500 cursor-pointer",onClick:()=>u(i.groupKey),children:[e.jsx(d,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:i.isExpanded?e.jsx(oe,{className:"h-4 w-4"}):e.jsx(Le,{className:"h-4 w-4"})}),e.jsx(ye,{name:i.trainer}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-900",children:i.trainer}),e.jsxs("div",{className:"text-xs text-slate-500",children:[i.aggregatedMetrics.totalClasses," total classes"]})]})]})}),e.jsx(d,{className:"py-4",children:e.jsx(k,{variant:"secondary",className:"font-medium",children:i.period})}),e.jsx(d,{className:"py-4 text-slate-500",children:"Multiple dates"}),e.jsx(d,{className:"py-4",children:e.jsx("div",{className:"text-slate-500",children:"Multiple classes"})}),e.jsx(d,{className:"py-4 text-slate-500",children:"Various"}),e.jsx(d,{className:"py-4 text-slate-500",children:"Various"}),e.jsx(d,{className:"py-4 text-slate-500",children:"Multiple locations"}),e.jsx(d,{className:"py-4 text-center",children:e.jsx(k,{className:"bg-blue-100 text-blue-800 font-bold",children:i.aggregatedMetrics.totalClasses})}),e.jsx(d,{className:"py-4 text-center",children:e.jsx(k,{className:"bg-red-100 text-red-800 font-bold",children:i.aggregatedMetrics.emptyClasses})}),e.jsx(d,{className:"py-4 text-center",children:e.jsx(k,{className:"bg-green-100 text-green-800 font-bold",children:i.aggregatedMetrics.nonEmptyClasses})}),e.jsx(d,{className:"py-4 text-center",children:e.jsx("div",{className:"font-bold text-slate-900",children:i.aggregatedMetrics.totalCheckedIn})}),e.jsx(d,{className:"py-4 text-center",children:e.jsx("div",{className:"font-medium text-slate-700",children:i.aggregatedMetrics.avgAll.toFixed(1)})}),e.jsx(d,{className:"py-4 text-center",children:e.jsx("div",{className:"font-medium text-slate-700",children:i.aggregatedMetrics.avgNonEmpty.toFixed(1)})}),e.jsx(d,{className:"py-4 text-center",children:e.jsx("div",{className:"font-bold text-green-700",children:X(i.aggregatedMetrics.totalRevenue)})}),e.jsx(d,{className:"py-4 text-center",children:e.jsx("div",{className:"font-medium text-orange-700",children:i.aggregatedMetrics.totalLateCancels})}),e.jsx(d,{className:"py-4 text-center text-slate-400",children:"-"}),e.jsx(d,{className:"py-4 text-center text-slate-400",children:"-"})]}),i.isExpanded&&i.sessions.map((m,C)=>e.jsxs(se,{className:"bg-white hover:bg-blue-50 transition-colors border-l-4 border-l-transparent hover:border-l-blue-300",children:[e.jsx(d,{className:"py-3 pl-12",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ye,{name:m.trainerName||"Unknown"}),e.jsx("div",{children:e.jsx("div",{className:"font-medium text-slate-800",children:m.trainerName})})]})}),e.jsx(d,{className:"py-3",children:e.jsx(k,{variant:"outline",className:"text-xs",children:m.period})}),e.jsx(d,{className:"py-3",children:e.jsx("div",{className:"text-sm font-medium text-slate-700",children:Ne(m.date)})}),e.jsx(d,{className:"py-3",children:e.jsx(Re,{type:m.cleanedClass||"Unknown"})}),e.jsx(d,{className:"py-3",children:e.jsx("div",{className:"text-sm text-slate-600",children:m.dayOfWeek})}),e.jsx(d,{className:"py-3",children:e.jsx("div",{className:"text-sm font-medium text-slate-700",children:m.time})}),e.jsx(d,{className:"py-3",children:e.jsx("div",{className:"text-sm text-slate-600 truncate max-w-[120px]",children:m.location})}),e.jsx(d,{className:"py-3 text-center",children:e.jsx(k,{variant:"secondary",className:"text-xs",children:"1"})}),e.jsx(d,{className:"py-3 text-center",children:e.jsx(k,{className:ee("text-xs font-medium",m.emptyClasses>0?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"),children:m.emptyClasses})}),e.jsx(d,{className:"py-3 text-center",children:e.jsx(k,{className:ee("text-xs font-medium",m.nonEmptyClasses>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:m.nonEmptyClasses})}),e.jsx(d,{className:"py-3 text-center",children:e.jsx("div",{className:"font-medium text-slate-800",children:m.checkedInCount||0})}),e.jsx(d,{className:"py-3 text-center",children:e.jsx("div",{className:"text-sm text-slate-600",children:m.checkedInCount||0})}),e.jsx(d,{className:"py-3 text-center",children:e.jsx("div",{className:"text-sm text-slate-600",children:(m.checkedInCount||0)>0?m.checkedInCount||0:"-"})}),e.jsx(d,{className:"py-3 text-center",children:e.jsx("div",{className:"font-medium text-green-700",children:X(m.totalPaid||0)})}),e.jsx(d,{className:"py-3 text-center",children:e.jsx("div",{className:"text-sm text-orange-600",children:m.lateCancelledCount||0})}),e.jsx(d,{className:"py-3 text-center text-slate-400",children:"-"}),e.jsx(d,{className:"py-3 text-center text-slate-400",children:"-"})]},`${i.groupKey}-${C}`))]},i.groupKey)):c.map((i,m)=>e.jsxs(se,{className:"bg-white hover:bg-blue-50 transition-colors border-l-4 border-l-transparent hover:border-l-blue-300",children:[e.jsx(d,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ye,{name:i.trainerName||"Unknown"}),e.jsx("div",{children:e.jsx("div",{className:"font-medium text-slate-800",children:i.trainerName})})]})}),e.jsx(d,{className:"py-4",children:e.jsx(k,{variant:"secondary",className:"font-medium",children:i.period})}),e.jsx(d,{className:"py-4",children:e.jsx("div",{className:"font-medium text-slate-700",children:Ne(i.date)})}),e.jsx(d,{className:"py-4",children:e.jsx(Re,{type:i.cleanedClass||"Unknown"})}),e.jsx(d,{className:"py-4",children:e.jsx("div",{className:"text-slate-600",children:i.dayOfWeek})}),e.jsx(d,{className:"py-4",children:e.jsx("div",{className:"font-medium text-slate-700",children:i.time})}),e.jsx(d,{className:"py-4",children:e.jsx("div",{className:"text-slate-600 truncate max-w-[120px]",children:i.location})}),e.jsx(d,{className:"py-4 text-center",children:e.jsx(k,{variant:"secondary",children:"1"})}),e.jsx(d,{className:"py-4 text-center",children:e.jsx(k,{className:ee("font-medium",i.emptyClasses>0?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"),children:i.emptyClasses})}),e.jsx(d,{className:"py-4 text-center",children:e.jsx(k,{className:ee("font-medium",i.nonEmptyClasses>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:i.nonEmptyClasses})}),e.jsx(d,{className:"py-4 text-center",children:e.jsx("div",{className:"font-bold text-slate-900",children:i.checkedInCount||0})}),e.jsx(d,{className:"py-4 text-center",children:e.jsx("div",{className:"font-medium text-slate-700",children:i.checkedInCount||0})}),e.jsx(d,{className:"py-4 text-center",children:e.jsx("div",{className:"font-medium text-slate-700",children:(i.checkedInCount||0)>0?i.checkedInCount||0:"-"})}),e.jsx(d,{className:"py-4 text-center",children:e.jsx("div",{className:"font-bold text-green-700",children:X(i.totalPaid||0)})}),e.jsx(d,{className:"py-4 text-center",children:e.jsx("div",{className:"font-medium text-orange-700",children:i.lateCancelledCount||0})}),e.jsx(d,{className:"py-4 text-center text-slate-400",children:"-"}),e.jsx(d,{className:"py-4 text-center text-slate-400",children:"-"})]},m))})]})}),f>1&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-slate-100 bg-slate-50",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",(s-1)*o+1," to ",Math.min(s*o,a.length)," of ",a.length," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>l(i=>Math.max(1,i-1)),disabled:s===1,className:"flex items-center gap-1",children:[e.jsx(Xs,{className:"w-4 h-4"}),"Previous"]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,f)},(i,m)=>{const C=m+1;return e.jsx(M,{variant:s===C?"default":"ghost",size:"sm",onClick:()=>l(C),className:"w-8 h-8 p-0",children:C},C)})}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>l(i=>Math.min(f,i+1)),disabled:s===f,className:"flex items-center gap-1",children:["Next",e.jsx(Le,{className:"w-4 h-4"})]})]})]})]})]})},fs=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ra=({data:x,location:n})=>{const[S,y]=j.useState("attendance"),[R,t]=j.useState("overall"),[p,g]=j.useState(!1),N=j.useMemo(()=>{const l=new Set;return x.forEach(o=>{const A=new Date(o.date),v=`${A.getFullYear()}-${String(A.getMonth()+1).padStart(2,"0")}`;l.add(v)}),Array.from(l).sort().map(o=>{const[A,v]=o.split("-"),F=parseInt(v)-1;return{key:o,label:`${fs[F]} ${A}`,shortLabel:`${fs[F]}'${A.slice(2)}`}})},[x]),T=j.useMemo(()=>{const l=new Map;return x.forEach(A=>{let v="Overall";switch(R){case"trainer":v=A.trainerName||"Unknown Trainer";break;case"class":v=A.cleanedClass||"Unknown Class";break;case"location":v=A.location||"Unknown Location";break;case"day_time":v=`${A.dayOfWeek} ${A.time}`;break;case"trainer_class":v=`${A.trainerName||"Unknown"} - ${A.cleanedClass||"Unknown"}`;break;case"overall":default:v="Overall";break}l.has(v)||l.set(v,[]),l.get(v).push(A)}),Array.from(l.entries()).map(([A,v])=>{const F={};N.forEach(b=>{F[b.key]={month:b.key,monthLabel:b.label,sessions:0,attendance:0,capacity:0,revenue:0,fillRate:0,classAverage:0,bookingRate:0,lateCancellations:0,uniqueClasses:0,uniqueTrainers:0}}),v.forEach(b=>{const a=new Date(b.date),c=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;if(F[c]){const f=F[c];f.sessions+=1,f.attendance+=b.checkedInCount||0,f.capacity+=b.capacity||0,f.revenue+=b.totalPaid||0,f.lateCancellations+=b.lateCancelledCount||0}}),Object.values(F).forEach(b=>{b.fillRate=b.capacity>0?b.attendance/b.capacity*100:0,b.classAverage=b.sessions>0?b.attendance/b.sessions:0,b.bookingRate=b.capacity>0?b.attendance/b.capacity*100:0});const w={month:"total",monthLabel:"Total",sessions:Object.values(F).reduce((b,a)=>b+a.sessions,0),attendance:Object.values(F).reduce((b,a)=>b+a.attendance,0),capacity:Object.values(F).reduce((b,a)=>b+a.capacity,0),revenue:Object.values(F).reduce((b,a)=>b+a.revenue,0),lateCancellations:Object.values(F).reduce((b,a)=>b+a.lateCancellations,0),fillRate:0,classAverage:0,bookingRate:0,uniqueClasses:0,uniqueTrainers:0};return w.fillRate=w.capacity>0?w.attendance/w.capacity*100:0,w.classAverage=w.sessions>0?w.attendance/w.sessions:0,w.bookingRate=w.capacity>0?w.attendance/w.capacity*100:0,{groupKey:A,groupLabel:A,monthlyData:F,totals:w}}).sort((A,v)=>v.totals.attendance-A.totals.attendance)},[x,R,N]),L=(l,o)=>{switch(o){case"attendance":return E(l.attendance);case"sessions":return E(l.sessions);case"revenue":return X(l.revenue);case"fillRate":return Ke(l.fillRate);case"classAverage":return E(l.classAverage);case"capacity":return E(l.capacity);case"bookingRate":return Ke(l.bookingRate);default:return E(l.attendance)}},h=(l,o)=>o===0?l>0?100:0:(l-o)/o*100,r=[{value:"attendance",label:"Attendance",icon:J},{value:"sessions",label:"Sessions",icon:U},{value:"revenue",label:"Revenue",icon:be},{value:"fillRate",label:"Fill Rate",icon:V},{value:"classAverage",label:"Class Average",icon:ve},{value:"capacity",label:"Capacity",icon:_e},{value:"bookingRate",label:"Booking Rate",icon:Ss}],s=[{value:"overall",label:"Overall",icon:ve},{value:"trainer",label:"By Trainer",icon:J},{value:"class",label:"By Class",icon:Te},{value:"location",label:"By Location",icon:$e},{value:"day_time",label:"By Day & Time",icon:ne},{value:"trainer_class",label:"By Trainer & Class",icon:V}];return e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:e.jsxs(K,{className:"w-full shadow-2xl bg-gradient-to-br from-white via-slate-50 to-purple-50/30 border-0 overflow-hidden",children:[e.jsx(P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1},children:e.jsxs(ae,{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-purple-700 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/90 to-pink-600/90 backdrop-blur-sm"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(re,{className:"flex items-center gap-3 text-xl font-bold",children:[e.jsx(P.div,{initial:{rotate:0},animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx(Js,{className:"w-6 h-6"})}),"Month-on-Month Analytics"]}),e.jsx(P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(k,{variant:"secondary",className:"bg-white/20 text-white border-white/30 backdrop-blur-sm",children:[x.length," Total Sessions"]})})]})})]})}),e.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsxs(B,{className:"p-6 bg-gradient-to-br from-white/95 to-slate-50/95 backdrop-blur-sm",children:[e.jsxs(P.div,{className:"flex flex-wrap items-center justify-between gap-4 mb-6 p-4 rounded-xl bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-100",whileHover:{scale:1.01},transition:{duration:.2},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(P.div,{className:"space-y-2",whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsxs("label",{className:"text-sm font-semibold text-purple-700 flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"}),"Metric"]}),e.jsxs(ue,{value:S,onValueChange:l=>y(l),children:[e.jsx(ge,{className:"w-[180px] border-purple-200 focus:border-purple-400 shadow-sm",children:e.jsx(pe,{})}),e.jsx(je,{children:r.map(l=>{const o=l.icon;return e.jsx(H,{value:l.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-4 h-4"}),l.label]})},l.value)})})]})]}),e.jsxs(P.div,{className:"space-y-2",whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsxs("label",{className:"text-sm font-semibold text-purple-700 flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),"Group By"]}),e.jsxs(ue,{value:R,onValueChange:l=>t(l),children:[e.jsx(ge,{className:"w-[200px] border-purple-200 focus:border-purple-400 shadow-sm",children:e.jsx(pe,{})}),e.jsx(je,{children:s.map(l=>{const o=l.icon;return e.jsx(H,{value:l.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-4 h-4"}),l.label]})},l.value)})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(M,{variant:p?"default":"outline",size:"sm",onClick:()=>g(!p),className:ee("transition-all duration-200",p?"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700":"border-purple-200 text-purple-700 hover:bg-purple-50"),children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Growth %"]})}),e.jsx(P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.5},children:e.jsx(k,{variant:"outline",className:"text-sm border-purple-200 text-purple-700 bg-purple-50",children:"Date Filters Ignored"})})]})]}),e.jsx(P.div,{className:"border border-purple-100 rounded-xl overflow-hidden bg-white shadow-xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsx("div",{className:"overflow-x-auto max-h-[600px] overflow-y-auto",children:e.jsxs(Oe,{children:[e.jsx(Pe,{className:`sticky top-0 z-20 shadow-sm border-b-2 ${Be("attendance")}`,children:e.jsxs(se,{children:[e.jsx(D,{className:`min-w-[200px] sticky left-0 border-r font-bold ${Be("attendance")}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4 text-white"}),R==="trainer"?"Trainer":R==="class"?"Class":R==="location"?"Location":R==="day_time"?"Day & Time":R==="trainer_class"?"Trainer & Class":"Category"]})}),N.map(l=>e.jsx(D,{className:`text-center min-w-[120px] font-bold ${Be("attendance")}`,children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-semibold",children:l.shortLabel}),p&&e.jsx("div",{className:"text-xs text-gray-500",children:"Growth %"})]})},l.key)),e.jsx(D,{className:"text-center min-w-[120px] bg-blue-100 font-bold text-slate-900",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-semibold",children:"Total"}),p&&e.jsx("div",{className:"text-xs text-gray-500",children:"Avg Growth"})]})})]})}),e.jsx(Ie,{children:e.jsx(ya,{children:T.map((l,o)=>e.jsxs(P.tr,{className:ee("border-b transition-all duration-300 hover:shadow-md",o%2===0?"bg-white":"bg-slate-50/50"),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:o*.05},whileHover:{backgroundColor:"rgba(59, 130, 246, 0.05)",scale:1.005,transition:{duration:.2}},children:[e.jsx(d,{className:"sticky left-0 bg-inherit border-r font-medium",children:e.jsxs(P.div,{className:"flex items-center gap-2",whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsx(P.div,{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white text-xs font-bold shadow-md",whileHover:{scale:1.1,rotate:5},transition:{duration:.2},children:l.groupLabel.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:l.groupLabel}),e.jsxs("div",{className:"text-xs text-gray-500",children:[l.totals.sessions," sessions total"]})]})]})}),N.map((A,v)=>{const F=l.monthlyData[A.key],w=v>0?l.monthlyData[N[v-1].key]:null,b=u=>{switch(u){case"attendance":return F.attendance;case"sessions":return F.sessions;case"revenue":return F.revenue;case"fillRate":return F.fillRate;case"classAverage":return F.classAverage;case"capacity":return F.capacity;case"bookingRate":return F.bookingRate;default:return F.attendance}},a=b(S),c=w?b(S):0,f=w?h(a,c):0;return e.jsx(d,{className:"text-center",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:L(F,S)}),p&&w&&e.jsxs("div",{className:ee("text-xs font-medium flex items-center justify-center gap-1",f>0?"text-green-600":f<0?"text-red-600":"text-gray-500"),children:[f>0?e.jsx(Qs,{className:"w-3 h-3"}):f<0?e.jsx(Zs,{className:"w-3 h-3"}):null,Ke(Math.abs(f))]})]})},A.key)}),e.jsx(d,{className:"text-center bg-blue-50/50",children:e.jsx(P.div,{className:"font-bold text-blue-800",whileHover:{scale:1.1},transition:{duration:.2},children:L(l.totals,S)})})]},l.groupKey))})})]})})}),e.jsxs(P.div,{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[e.jsx(P.div,{whileHover:{scale:1.05,rotate:1},transition:{duration:.2},children:e.jsx(K,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200 shadow-lg hover:shadow-xl transition-shadow duration-300",children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx(P.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.6},children:e.jsx(U,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"})}),e.jsx("div",{className:"text-2xl font-bold text-blue-800",children:N.length}),e.jsx("div",{className:"text-sm text-blue-600",children:"Months Tracked"})]})})}),e.jsx(P.div,{whileHover:{scale:1.05,rotate:-1},transition:{duration:.2},children:e.jsx(K,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200 shadow-lg hover:shadow-xl transition-shadow duration-300",children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx(P.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.7},children:e.jsx(J,{className:"w-8 h-8 mx-auto mb-2 text-green-600"})}),e.jsx("div",{className:"text-2xl font-bold text-green-800",children:E(x.reduce((l,o)=>l+(o.checkedInCount||0),0))}),e.jsx("div",{className:"text-sm text-green-600",children:"Total Attendance"})]})})}),e.jsx(P.div,{whileHover:{scale:1.05,rotate:1},transition:{duration:.2},children:e.jsx(K,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200 shadow-lg hover:shadow-xl transition-shadow duration-300",children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx(P.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.8},children:e.jsx(be,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"})}),e.jsx("div",{className:"text-2xl font-bold text-purple-800",children:X(x.reduce((l,o)=>l+(o.totalPaid||0),0))}),e.jsx("div",{className:"text-sm text-purple-600",children:"Total Revenue"})]})})}),e.jsx(P.div,{whileHover:{scale:1.05,rotate:-1},transition:{duration:.2},children:e.jsx(K,{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200 shadow-lg hover:shadow-xl transition-shadow duration-300",children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx(P.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.9},children:e.jsx(ve,{className:"w-8 h-8 mx-auto mb-2 text-orange-600"})}),e.jsx("div",{className:"text-2xl font-bold text-orange-800",children:T.length}),e.jsx("div",{className:"text-sm text-orange-600",children:R==="trainer"?"Trainers":R==="class"?"Classes":R==="location"?"Locations":"Groups"})]})})})]})]})})]})})},_a=()=>{const{data:x,loading:n}=Ls(),S=$s(x||[]),{data:y}=pa(),[R,t]=j.useState(null),[p,g]=j.useState(!1),[N,T]=j.useState("all"),L=r=>{t(r),g(!0)},h=()=>{g(!1),t(null)};return n?null:e.jsxs("div",{className:"space-y-8",children:[e.jsx(ja,{data:S,selectedLocation:N,onLocationChange:T,children:r=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-6",children:e.jsx(ba,{data:r,payrollData:y,onMetricClick:L})}),e.jsx(Ta,{data:r}),e.jsxs(Ye,{defaultValue:"comprehensive",className:"w-full",children:[e.jsxs(Ge,{className:"modern-tabs grid grid-cols-6 w-full",children:[e.jsx(te,{value:"comprehensive",className:"modern-tab-trigger tab-variant-blue",children:"Comprehensive"}),e.jsx(te,{value:"month-on-month",className:"modern-tab-trigger tab-variant-emerald",children:"Month-on-Month"}),e.jsx(te,{value:"rankings",className:"modern-tab-trigger tab-variant-purple",children:"Rankings"}),e.jsx(te,{value:"performance",className:"modern-tab-trigger tab-variant-blue",children:"Performance"}),e.jsx(te,{value:"analytics",className:"modern-tab-trigger tab-variant-rose",children:"Analytics"}),e.jsx(te,{value:"insights",className:"modern-tab-trigger tab-variant-purple",children:"Insights"})]}),e.jsx(le,{value:"comprehensive",className:"mt-6",children:e.jsx(Aa,{data:r,location:N==="all"?"All Locations":N,onDrillDown:L})}),e.jsx(le,{value:"month-on-month",className:"mt-6",children:e.jsx(Ra,{data:x||[],location:N==="all"?"All Locations":N})}),e.jsx(le,{value:"rankings",className:"mt-6",children:e.jsx(Na,{data:r,location:N==="all"?"All Locations":N})}),e.jsx(le,{value:"performance",className:"mt-6",children:e.jsx(fa,{data:r,onDrillDown:L})}),e.jsx(le,{value:"analytics",className:"mt-6",children:e.jsx(K,{className:"bg-white border-slate-200",children:e.jsxs(B,{className:"p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"Advanced Analytics Coming Soon"}),e.jsx("p",{className:"text-slate-500",children:"Detailed trend analysis, predictive insights, and custom reporting features will be available here."})]})})}),e.jsx(le,{value:"insights",className:"mt-6",children:e.jsx(K,{className:"bg-white border-slate-200",children:e.jsxs(B,{className:"p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"AI-Powered Insights"}),e.jsx("p",{className:"text-slate-500",children:"Machine learning-driven recommendations and business insights will be displayed here."})]})})})]})]})}),e.jsx(va,{isOpen:p,onClose:h,data:R||{title:"",sessions:[]}})]})},Da=({data:x})=>{const n=j.useMemo(()=>{if(!x||x.length===0)return[];const R=x.reduce((t,p)=>{const g=new Date(p.date);if(isNaN(g.getTime()))return t;const N=g.toLocaleDateString();return t[N]||(t[N]={date:N,totalSessions:0,totalBooked:0,totalCheckedIn:0,totalCapacity:0,avgFillRate:0}),t[N].totalSessions+=1,t[N].totalBooked+=p.bookedCount||0,t[N].totalCheckedIn+=p.checkedInCount||0,t[N].totalCapacity+=p.capacity||0,t},{});return Object.values(R).map(t=>Ce(he({},t),{avgFillRate:t.totalCapacity>0?(t.totalBooked/t.totalCapacity*100).toFixed(1):0,attendanceRate:t.totalBooked>0?(t.totalCheckedIn/t.totalBooked*100).toFixed(1):0})).slice(-30)},[x]),S=j.useMemo(()=>{if(!x||x.length===0)return[];const R=x.reduce((t,p)=>{const g=new Date(p.date);if(isNaN(g.getTime()))return t;const N=new Date(g);N.setDate(g.getDate()-g.getDay());const T=N.toISOString().split("T")[0];return t[T]||(t[T]={week:T,sessions:0,totalAttendance:0,avgFillRate:0,totalCapacity:0}),t[T].sessions+=1,t[T].totalAttendance+=p.checkedInCount||0,t[T].totalCapacity+=p.capacity||0,t},{});return Object.values(R).map(t=>Ce(he({},t),{avgFillRate:t.totalCapacity>0?(t.totalAttendance/t.totalCapacity*100).toFixed(1):0})).slice(-12)},[x]),y=({active:R,payload:t,label:p})=>R&&t&&t.length?e.jsxs("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-semibold text-gray-800",children:p}),t.map((g,N)=>e.jsxs("p",{style:{color:g.color},className:"text-sm",children:[g.dataKey,": ",g.value,g.dataKey.includes("Rate")||g.dataKey.includes("Fill")?"%":""]},N))]}):null;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs(K,{className:"bg-gradient-to-br from-white via-blue-50/30 to-white border-0 shadow-xl",children:[e.jsx(ae,{className:"pb-4",children:e.jsxs(re,{className:"text-xl font-bold bg-gradient-to-r from-slate-700 to-slate-900 bg-clip-text text-transparent flex items-center gap-2",children:[e.jsx(Ae,{className:"w-6 h-6 text-blue-600"}),"Daily Attendance Analytics"]})}),e.jsx(B,{children:e.jsx("div",{className:"h-80",children:e.jsx(us,{width:"100%",height:"100%",children:e.jsxs(wa,{data:n,children:[e.jsx(gs,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(ps,{dataKey:"date",stroke:"#6b7280",fontSize:12,tickFormatter:R=>new Date(R).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(js,{stroke:"#6b7280",fontSize:12}),e.jsx(bs,{content:e.jsx(y,{})}),e.jsx(Ns,{}),e.jsx(Ve,{type:"monotone",dataKey:"totalCheckedIn",stroke:"#3b82f6",strokeWidth:3,name:"Daily Check-ins",dot:{fill:"#3b82f6",strokeWidth:2,r:4}}),e.jsx(Ve,{type:"monotone",dataKey:"avgFillRate",stroke:"#10b981",strokeWidth:3,name:"Fill Rate %",dot:{fill:"#10b981",strokeWidth:2,r:4}}),e.jsx(Ve,{type:"monotone",dataKey:"attendanceRate",stroke:"#f59e0b",strokeWidth:3,name:"Attendance Rate %",dot:{fill:"#f59e0b",strokeWidth:2,r:4}})]})})})})]}),e.jsxs(K,{className:"bg-gradient-to-br from-white via-purple-50/30 to-white border-0 shadow-xl",children:[e.jsx(ae,{className:"pb-4",children:e.jsxs(re,{className:"text-xl font-bold bg-gradient-to-r from-slate-700 to-slate-900 bg-clip-text text-transparent flex items-center gap-2",children:[e.jsx(U,{className:"w-6 h-6 text-purple-600"}),"Weekly Performance Overview"]})}),e.jsx(B,{children:e.jsx("div",{className:"h-80",children:e.jsx(us,{width:"100%",height:"100%",children:e.jsxs(Ca,{data:S,children:[e.jsx(gs,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(ps,{dataKey:"week",stroke:"#6b7280",fontSize:12,tickFormatter:R=>new Date(R).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(js,{stroke:"#6b7280",fontSize:12}),e.jsx(bs,{content:e.jsx(y,{})}),e.jsx(Ns,{}),e.jsx(vs,{dataKey:"sessions",fill:"#8b5cf6",name:"Total Sessions",radius:[4,4,0,0]}),e.jsx(vs,{dataKey:"totalAttendance",fill:"#06b6d4",name:"Total Attendance",radius:[4,4,0,0]})]})})})})]})]})},Fa=({data:x})=>{const n=j.useMemo(()=>{var b;const t=x.filter(a=>{const c=a.cleanedClass||"";return!["Hosted","P57","X"].some(O=>c.toLowerCase().includes(O.toLowerCase()))}),p=t.length,g=t.reduce((a,c)=>a+c.capacity,0),N=t.reduce((a,c)=>a+c.checkedInCount,0),T=t.reduce((a,c)=>a+c.totalPaid,0),L=t.reduce((a,c)=>a+c.lateCancelledCount,0),h=t.reduce((a,c)=>a+c.complimentaryCount,0);t.reduce((a,c)=>a+c.nonPaidCount,0),t.reduce((a,c)=>a+c.bookedCount,0);const r=t.reduce((a,c)=>a+c.checkedInsWithMemberships,0);t.reduce((a,c)=>a+c.checkedInsWithPackages,0);const s=g>0?N/g*100:0,l=p>0?T/p:0,o=p>0?L/p:0,A=p>0?N/p:0,v=N>0?r/N*100:0,F=t.reduce((a,c)=>(a[c.time]=(a[c.time]||0)+c.checkedInCount,a),{}),w=((b=Object.entries(F).sort(([,a],[,c])=>c-a)[0])==null?void 0:b[0])||"N/A";return[{title:"Total Sessions",value:E(p),change:8.2,description:"Active class sessions tracked (excluding hosted, P57, X)",detailDescription:`Total capacity: ${E(g)} seats across all sessions. Includes all regular classes and excludes special events.`,icon:U,color:"blue"},{title:"Average Class Size",value:A.toFixed(1),change:12.5,description:"Average attendees per session",detailDescription:`Calculated from ${E(N)} total attendees across ${p} sessions. This metric helps track class popularity and capacity optimization.`,icon:J,color:"purple"},{title:"Average Fill Rate",value:`${s.toFixed(1)}%`,change:15.3,description:"Average capacity utilization",detailDescription:`${E(N)} attendees out of ${E(g)} total capacity. Higher fill rates indicate better demand-capacity matching.`,icon:V,color:"green"},{title:"Total Revenue",value:X(T),change:7.4,description:"Revenue from class attendance",detailDescription:`Generated from ${p} sessions with an average of ${X(l)} per session. Includes all paid attendees.`,icon:be,color:"yellow"},{title:"Late Cancellations",value:E(L),change:-2.1,description:`Avg ${o.toFixed(1)} per session`,detailDescription:"Total late cancellations across all sessions. This impacts revenue and class planning. Lower is better for studio operations.",icon:qe,color:"red"},{title:"Complimentary Attendees",value:E(h),change:3.8,description:"Free class attendees",detailDescription:`Students attending on complimentary passes or promotional offers. Represents ${(h/N*100).toFixed(1)}% of total attendance.`,icon:ea,color:"pink"},{title:"Membership Usage",value:`${v.toFixed(1)}%`,change:4.2,description:"Classes attended using memberships",detailDescription:`${E(r)} out of ${E(N)} attendees used memberships. Higher percentage indicates strong membership engagement.`,icon:Ts,color:"indigo"},{title:"Most Popular Time",value:w,change:0,description:"Peak attendance time slot",detailDescription:`Time slot with highest total attendance: ${F[w]||0} attendees. Use this data for scheduling and resource allocation.`,icon:ne,color:"teal"}]},[x]),S=t=>({blue:"text-blue-600",green:"text-green-600",purple:"text-purple-600",yellow:"text-yellow-600",indigo:"text-indigo-600",pink:"text-pink-600",red:"text-red-600",teal:"text-teal-600"})[t]||"text-gray-600",y=t=>({blue:"bg-blue-50",green:"bg-green-50",purple:"bg-purple-50",yellow:"bg-yellow-50",indigo:"bg-indigo-50",pink:"bg-pink-50",red:"bg-red-50",teal:"bg-teal-50"})[t]||"bg-gray-50",R=t=>({blue:"bg-gradient-to-r from-blue-500 to-blue-600",green:"bg-gradient-to-r from-green-500 to-green-600",purple:"bg-gradient-to-r from-purple-500 to-purple-600",yellow:"bg-gradient-to-r from-yellow-500 to-yellow-600",indigo:"bg-gradient-to-r from-indigo-500 to-indigo-600",pink:"bg-gradient-to-r from-pink-500 to-pink-600",red:"bg-gradient-to-r from-red-500 to-red-600",teal:"bg-gradient-to-r from-teal-500 to-teal-600"})[t]||"bg-gradient-to-r from-gray-500 to-gray-600";return e.jsx(Xe,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map((t,p)=>e.jsxs(_,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(K,{className:"bg-white/90 backdrop-blur-sm shadow-lg border-0 hover:shadow-xl transition-all duration-300 cursor-pointer group hover:scale-105",children:[e.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsx(re,{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900 transition-colors",children:t.title}),e.jsx("div",{className:`p-3 rounded-xl ${y(t.color)} group-hover:scale-110 transition-transform`,children:e.jsx(t.icon,{className:`h-5 w-5 ${S(t.color)}`})})]}),e.jsxs(B,{className:"space-y-3",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900 group-hover:text-gray-800 transition-colors",children:t.value}),t.change!==0&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.change>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[e.jsx(Ae,{className:`h-3 w-3 mr-1 ${t.change<0?"rotate-180":""}`}),t.change>0?"+":"",t.change,"%"]}),e.jsx("span",{className:"ml-2 text-gray-500",children:"vs last period"})]}),e.jsx("p",{className:"text-sm text-gray-600 group-hover:text-gray-700 transition-colors",children:t.description})]})]})}),e.jsx(Y,{side:"bottom",className:"max-w-xs p-4 bg-white shadow-xl border-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:`w-8 h-8 ${R(t.color)} rounded-lg flex items-center justify-center mb-2`,children:e.jsx(t.icon,{className:"h-4 w-4 text-white"})}),e.jsx("h4",{className:"font-semibold text-gray-900",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:t.detailDescription}),t.change!==0&&e.jsx("div",{className:"pt-2 border-t border-gray-100",children:e.jsxs("span",{className:"text-xs text-gray-500",children:[t.change>0?"Trending up":"Trending down"," by ",Math.abs(t.change),"% from previous period"]})})]})})]},t.title))})})},Ma=({data:x})=>{var b;const[n,S]=j.useState(new Set),[y,R]=j.useState("classTypeDayTimeLocation"),[t,p]=j.useState("classAverage"),[g,N]=j.useState("desc"),[T,L]=j.useState(null),h=j.useMemo(()=>x.filter(a=>{const c=a.cleanedClass||"";return!["Hosted","P57","X"].some(O=>c.toLowerCase().includes(O.toLowerCase()))}),[x]),r=j.useMemo(()=>{const a={};return h.forEach(c=>{let f;switch(y){case"uniqueId":f=c.uniqueId||"Unknown";break;case"trainer":f=c.trainerName||"Unknown";break;case"classType":f=c.cleanedClass||"Unknown";break;case"dayOfWeek":f=c.dayOfWeek||"Unknown";break;case"timeSlot":f=c.time||"Unknown";break;case"location":f=c.location||"Unknown";break;case"date":f=c.date||"Unknown";break;case"capacity":f=`${c.capacity} seats`;break;case"classTypeDay":f=`${c.cleanedClass||"Unknown"} | ${c.dayOfWeek||"Unknown"}`;break;case"classTypeTime":f=`${c.cleanedClass||"Unknown"} | ${c.time||"Unknown"}`;break;case"classTypeDayTime":f=`${c.cleanedClass||"Unknown"} | ${c.dayOfWeek||"Unknown"} | ${c.time||"Unknown"}`;break;case"classTypeDayTimeLocation":f=`${c.cleanedClass||"Unknown"} | ${c.dayOfWeek||"Unknown"} | ${c.time||"Unknown"} | ${c.location||"Unknown"}`;break;case"classTypeDayTimeLocationTrainer":f=`${c.cleanedClass||"Unknown"} | ${c.dayOfWeek||"Unknown"} | ${c.time||"Unknown"} | ${c.location||"Unknown"} | ${c.trainerName||"Unknown"}`;break;default:f=c.uniqueId||"Unknown"}a[f]||(a[f]=[]),a[f].push(c)}),a},[h,y]),s=j.useMemo(()=>Object.entries(r).filter(([,a])=>a.length>=2).map(([a,c])=>{const f=c.reduce((I,W)=>I+W.checkedInCount,0),u=c.reduce((I,W)=>I+W.capacity,0),O=c.reduce((I,W)=>I+W.totalPaid,0),z=c.reduce((I,W)=>I+W.lateCancelledCount,0),$=c.reduce((I,W)=>I+W.complimentaryCount,0),Ne=c.reduce((I,W)=>I+W.nonPaidCount,0),ye=c.reduce((I,W)=>I+W.bookedCount,0),Re=c.reduce((I,W)=>I+W.checkedInsWithMemberships,0),i=c.reduce((I,W)=>I+W.checkedInsWithPackages,0),m=c.reduce((I,W)=>I+W.checkedInsWithIntroOffers,0),C=c.reduce((I,W)=>I+W.checkedInsWithSingleClasses,0),G=u>0?f/u*100:0,ce=c.length>0?O/c.length:0,de=c.length>0?f/c.length:0,fe=c.length>0?z/c.length:0;return{name:a,sessions:c,occurrences:c.length,totalAttendees:f,totalCapacity:u,totalBooked:ye,avgFillRate:G,totalRevenue:O,avgRevenue:ce,classAverage:de,lateCancellations:z,avgLateCancellations:fe,complimentaryCount:$,nonPaidCount:Ne,totalMemberships:Re,totalPackages:i,totalIntroOffers:m,totalSingleClasses:C}}).sort((a,c)=>{const f=a[t],u=c[t];return typeof f=="string"&&typeof u=="string"?g==="asc"?f.localeCompare(u):u.localeCompare(f):g==="asc"?f-u:u-f}),[r,t,g]),l=a=>{const c=new Set(n);c.has(a)?c.delete(a):c.add(a),S(c)},o=a=>{t===a?N(g==="asc"?"desc":"asc"):(p(a),N("desc"))},A=a=>{L(a)},v=[{value:"classTypeDayTimeLocation",label:"Class + Day + Time + Location",icon:V},{value:"classTypeDayTimeLocationTrainer",label:"Class + Day + Time + Location + Trainer",icon:V},{value:"classTypeDayTime",label:"Class + Day + Time",icon:V},{value:"classTypeDay",label:"Class + Day",icon:V},{value:"classTypeTime",label:"Class + Time",icon:V},{value:"uniqueId",label:"Individual Sessions",icon:U},{value:"trainer",label:"By Trainer",icon:J},{value:"classType",label:"By Class Type",icon:V},{value:"dayOfWeek",label:"By Day of Week",icon:U},{value:"timeSlot",label:"By Time Slot",icon:U},{value:"location",label:"By Location",icon:U},{value:"date",label:"By Date",icon:U},{value:"capacity",label:"By Capacity",icon:J}],F=()=>{const a=[];return(y.includes("classType")||y==="classType")&&a.push({key:"cleanedClass",label:"Class Name"}),(y.includes("Day")||y==="dayOfWeek")&&a.push({key:"dayOfWeek",label:"Day"}),(y.includes("Time")||y==="timeSlot")&&a.push({key:"time",label:"Time"}),(y.includes("Location")||y==="location")&&a.push({key:"location",label:"Location"}),(y.includes("Trainer")||y==="trainer")&&a.push({key:"trainerName",label:"Trainer"}),a},w=a=>{const c=a.split(" | "),f=F(),u={};return f.forEach((O,z)=>{u[O.key]=c[z]||""}),u};return e.jsx(Xe,{children:e.jsxs(K,{className:"bg-white/90 backdrop-blur-sm shadow-xl border-0 overflow-hidden",children:[e.jsx(ae,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-b border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(re,{className:"text-gray-800 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(Se,{className:"w-5 h-5 text-white"})}),"Session Analysis Table",e.jsxs(k,{variant:"secondary",className:"ml-2",children:[s.length," groups • ",h.length," sessions"]})]}),e.jsxs(Je,{children:[e.jsx(Qe,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-2 bg-white/80 hover:bg-white",children:[(b=v.find(a=>a.value===y))==null?void 0:b.label,e.jsx(oe,{className:"h-4 w-4"})]})}),e.jsx(Ze,{className:"bg-white shadow-lg border-0",children:v.map(a=>e.jsxs(es,{onClick:()=>R(a.value),className:"hover:bg-blue-50",children:[e.jsx(a.icon,{className:"w-4 h-4 mr-2"}),a.label]},a.value))})]})]})}),e.jsx(B,{className:"p-0",children:e.jsx("div",{className:"max-h-[800px] overflow-auto",children:e.jsxs(Oe,{children:[e.jsx(Pe,{className:"sticky top-0 bg-gradient-to-r from-gray-50 to-blue-50 z-10",children:e.jsxs(se,{children:[e.jsx(D,{className:"w-80 sticky left-0 bg-gradient-to-r from-gray-50 to-blue-50 z-20 border-r",children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>o("name"),className:"h-6 p-0 font-semibold",children:["Group",t==="name"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),F().map(a=>e.jsx(D,{className:"text-center min-w-28 font-semibold",children:a.label},a.key)),e.jsx(D,{className:"text-center min-w-20",children:e.jsxs(_,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>o("occurrences"),className:"h-6 p-0 font-semibold",children:["Sessions",t==="occurrences"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),e.jsx(Y,{children:e.jsx("p",{children:"Number of sessions in this group"})})]})}),e.jsx(D,{className:"text-center min-w-28",children:e.jsxs(_,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>o("totalAttendees"),className:"h-6 p-0 font-semibold",children:["Total Attendance",t==="totalAttendees"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),e.jsx(Y,{children:e.jsx("p",{children:"Total number of attendees across all sessions"})})]})}),e.jsx(D,{className:"text-center min-w-24",children:e.jsxs(_,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>o("avgFillRate"),className:"h-6 p-0 font-semibold",children:["Fill Rate %",t==="avgFillRate"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),e.jsx(Y,{children:e.jsx("p",{children:"Average capacity utilization percentage"})})]})}),e.jsx(D,{className:"text-center min-w-32",children:e.jsxs(_,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>o("totalRevenue"),className:"h-6 p-0 font-semibold",children:["Total Revenue",t==="totalRevenue"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),e.jsx(Y,{children:e.jsx("p",{children:"Total revenue generated by this group"})})]})}),e.jsx(D,{className:"text-center min-w-32",children:e.jsxs(_,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>o("avgRevenue"),className:"h-6 p-0 font-semibold",children:["Avg Revenue",t==="avgRevenue"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),e.jsx(Y,{children:e.jsx("p",{children:"Average revenue per session"})})]})}),e.jsx(D,{className:"text-center min-w-32",children:e.jsxs(_,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>o("lateCancellations"),className:"h-6 p-0 font-semibold",children:["Late Cancellations",t==="lateCancellations"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),e.jsx(Y,{children:e.jsx("p",{children:"Total late cancellations in this group"})})]})}),e.jsx(D,{className:"text-center min-w-32",children:e.jsxs(_,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>o("complimentaryCount"),className:"h-6 p-0 font-semibold",children:["Complimentary",t==="complimentaryCount"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),e.jsx(Y,{children:e.jsx("p",{children:"Total complimentary entries"})})]})}),e.jsx(D,{className:"text-center min-w-32",children:e.jsxs(_,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>o("nonPaidCount"),className:"h-6 p-0 font-semibold",children:["Non-Paid",t==="nonPaidCount"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),e.jsx(Y,{children:e.jsx("p",{children:"Total non-paid entries"})})]})}),e.jsx(D,{className:"text-center min-w-24",children:e.jsx(M,{variant:"ghost",size:"sm",className:"h-6 p-0 font-semibold",children:"Actions"})})]})}),e.jsx(Ie,{children:s.map(a=>{const c=w(a.name),f=F();return e.jsxs(Me.Fragment,{children:[e.jsxs(se,{className:"cursor-pointer hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 border-b-2 border-gray-200 transition-all duration-200",onClick:()=>l(a.name),children:[e.jsx(d,{className:"sticky left-0 bg-white z-10 border-r h-12 py-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[n.has(a.name)?e.jsx(oe,{className:"h-4 w-4 text-gray-500"}):e.jsx(Le,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center",children:e.jsx(V,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-semibold text-sm truncate max-w-[200px]",children:a.name})]})]})}),f.map(u=>e.jsx(d,{className:"text-center h-12 py-2 text-sm font-medium",children:e.jsx(k,{variant:"outline",className:"bg-blue-50",children:c[u.key]})},u.key)),e.jsx(d,{className:"text-center h-12 py-2",children:e.jsx(k,{variant:"secondary",className:"bg-gradient-to-r from-blue-100 to-purple-100 text-blue-700",children:a.occurrences})}),e.jsx(d,{className:"text-center h-12 py-2 text-sm font-medium",children:E(a.totalAttendees)}),e.jsx(d,{className:"text-center h-12 py-2",children:e.jsxs(k,{className:a.avgFillRate>=80?"bg-green-100 text-green-800":a.avgFillRate>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:[a.avgFillRate.toFixed(1),"%"]})}),e.jsx(d,{className:"text-center h-12 py-2 text-sm font-medium text-green-700",children:X(a.totalRevenue)}),e.jsx(d,{className:"text-center h-12 py-2 text-sm font-medium text-blue-700",children:X(a.avgRevenue)}),e.jsx(d,{className:"text-center h-12 py-2 text-sm font-medium",children:e.jsx(k,{variant:a.lateCancellations>10?"destructive":"secondary",children:a.lateCancellations})}),e.jsx(d,{className:"text-center h-12 py-2 text-sm font-medium",children:e.jsx(k,{variant:"outline",className:"bg-purple-50 text-purple-700",children:a.complimentaryCount})}),e.jsx(d,{className:"text-center h-12 py-2 text-sm font-medium",children:e.jsx(k,{variant:"outline",className:"bg-orange-50 text-orange-700",children:a.nonPaidCount})}),e.jsx(d,{className:"text-center h-12 py-2",children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:u=>{u.stopPropagation(),A(a.name)},className:"h-8 px-3 text-xs bg-gray-100 hover:bg-gray-200",children:[e.jsx(As,{className:"w-3 h-3 mr-1"}),"Details"]})})]}),n.has(a.name)&&e.jsx(se,{children:e.jsx(d,{colSpan:F().length+9,className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Average Attendance"}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:a.classAverage.toFixed(1)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Capacity"}),e.jsx("div",{className:"text-xl font-bold text-gray-800",children:E(a.totalCapacity)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Memberships Used"}),e.jsx("div",{className:"text-xl font-bold text-green-600",children:E(a.totalMemberships)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Packages Used"}),e.jsx("div",{className:"text-xl font-bold text-purple-600",children:E(a.totalPackages)})]})]})})})})]},a.name)})})]})})})]})})},La=({data:x})=>{const[n,S]=j.useState("all"),[y,R]=j.useState(new Set),t=j.useMemo(()=>x.filter(h=>{const r=h.cleanedClass||"";return!["Hosted","P57","X"].some(o=>r.toLowerCase().includes(o.toLowerCase()))}),[x]),p=h=>{const r=h.toLowerCase().trim();return r.includes("barre 57")||r.includes("barre57")?"Barre 57":r.includes("power cycle")||r.includes("powercycle")?"Power Cycle":r.includes("cycle")&&!r.includes("power")?"Cycle":r.includes("barre")&&!r.includes("57")?"Barre":h},g=j.useMemo(()=>{const h=t.reduce((r,s)=>{const l=s.cleanedClass||"Unknown",o=p(l);r[o]||(r[o]={className:o,classes:new Map,totalSessions:0,totalAttendees:0,totalRevenue:0,totalCapacity:0,totalLateCancellations:0,totalComplimentary:0,totalNonPaid:0,totalEmptyClasses:0});const A=`${l}|${s.dayOfWeek}|${s.time}|${s.location}`;r[o].classes.has(A)||r[o].classes.set(A,{className:l,dayOfWeek:s.dayOfWeek,time:s.time,location:s.location,trainerName:s.trainerName,sessions:0,attendees:0,revenue:0,capacity:0,classAverage:0,lateCancellations:0,complimentary:0,nonPaid:0,emptyClasses:0});const v=r[o].classes.get(A);return v.sessions++,v.attendees+=s.checkedInCount,v.revenue+=s.totalPaid,v.capacity+=s.capacity,v.lateCancellations+=s.lateCancelledCount,v.complimentary+=s.complimentaryCount,v.nonPaid+=s.nonPaidCount,s.checkedInCount===0&&(v.emptyClasses++,r[o].totalEmptyClasses++),r[o].totalSessions++,r[o].totalAttendees+=s.checkedInCount,r[o].totalRevenue+=s.totalPaid,r[o].totalCapacity+=s.capacity,r[o].totalLateCancellations+=s.lateCancelledCount,r[o].totalComplimentary+=s.complimentaryCount,r[o].totalNonPaid+=s.nonPaidCount,r},{});return Object.values(h).forEach(r=>{r.avgFillRate=r.totalCapacity>0?r.totalAttendees/r.totalCapacity*100:0,r.avgRevenue=r.totalSessions>0?r.totalRevenue/r.totalSessions:0,r.classAverage=r.totalSessions>0?r.totalAttendees/r.totalSessions:0,r.classes.forEach(s=>{s.classAverage=s.sessions>0?s.attendees/s.sessions:0,s.fillRate=s.capacity>0?s.attendees/s.capacity*100:0,s.avgLateCancellations=s.sessions>0?s.lateCancellations/s.sessions:0,s.emptyClassRate=s.sessions>0?s.emptyClasses/s.sessions*100:0}),r.classesArray=Array.from(r.classes.values()).filter(s=>s.sessions>=2).sort((s,l)=>l.classAverage-s.classAverage)}),Object.values(h).filter(r=>r.classesArray.length>0).sort((r,s)=>s.classAverage-r.classAverage)},[t]),N=j.useMemo(()=>n==="all"?g:g.filter(h=>h.className===n),[g,n]),T=h=>{const r=new Set(y);r.has(h)?r.delete(h):r.add(h),R(r)},L=["all",...g.map(h=>h.className)];return e.jsx(Xe,{children:e.jsxs(K,{className:"bg-white/90 backdrop-blur-sm shadow-xl border-0 overflow-hidden",children:[e.jsx(ae,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-b border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(re,{className:"text-gray-800 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl flex items-center justify-center",children:e.jsx(sa,{className:"w-5 h-5 text-white"})}),"Class Format Analysis",e.jsxs(k,{variant:"secondary",className:"ml-2",children:[g.length," class types • ",t.length," sessions"]})]}),e.jsxs(Je,{children:[e.jsx(Qe,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-2 bg-white/80 hover:bg-white",children:[n==="all"?"All Class Types":n,e.jsx(oe,{className:"h-4 w-4"})]})}),e.jsx(Ze,{className:"bg-white shadow-lg border-0 max-h-96 overflow-auto z-50",children:L.map(h=>e.jsxs(es,{onClick:()=>S(h),className:"hover:bg-purple-50",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),h==="all"?"All Class Types":h]},h))})]})]})}),e.jsx(B,{className:"p-0",children:e.jsx("div",{className:"max-h-[800px] overflow-auto space-y-4 p-4",children:N.map(h=>e.jsx(K,{className:"border shadow-sm",children:e.jsxs(Rs,{open:y.has(h.className),children:[e.jsx(Ds,{onClick:()=>T(h.className),className:"w-full",children:e.jsx(ae,{className:"hover:bg-gradient-to-r hover:from-purple-50 hover:to-pink-50 transition-all duration-200 cursor-pointer",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[y.has(h.className)?e.jsx(oe,{className:"h-5 w-5 text-gray-500"}):e.jsx(Le,{className:"h-5 w-5 text-gray-500"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:e.jsx(Ts,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:h.className}),e.jsxs("p",{className:"text-sm text-gray-600",children:[h.classesArray.length," schedules • ",h.totalSessions," sessions"]}),h.totalEmptyClasses>0&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[e.jsx(qe,{className:"w-3 h-3"}),h.totalEmptyClasses," empty classes"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-purple-600",children:h.classAverage.toFixed(1)}),e.jsx("div",{className:"text-gray-500",children:"Avg Attendance"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs(k,{variant:h.avgFillRate>80?"default":h.avgFillRate>60?"secondary":"outline",className:h.avgFillRate>80?"bg-green-100 text-green-700":h.avgFillRate>60?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700",children:[h.avgFillRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-gray-500 mt-1",children:"Fill Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-green-600",children:X(h.totalRevenue)}),e.jsx("div",{className:"text-gray-500",children:"Revenue"})]})]})]})})}),e.jsx(Fs,{children:e.jsx(B,{className:"pt-0",children:e.jsxs(Oe,{children:[e.jsx(Pe,{children:e.jsxs(se,{className:"bg-gradient-to-r from-gray-50 to-purple-50",children:[e.jsx(D,{className:"font-semibold",children:"Class Name"}),e.jsx(D,{className:"font-semibold",children:"Day"}),e.jsx(D,{className:"font-semibold",children:"Time"}),e.jsx(D,{className:"font-semibold",children:"Location"}),e.jsx(D,{className:"font-semibold",children:"Trainer"}),e.jsx(D,{className:"text-center font-semibold",children:e.jsxs(_,{children:[e.jsx(q,{children:"Sessions"}),e.jsx(Y,{children:"Number of sessions conducted"})]})}),e.jsx(D,{className:"text-center font-semibold",children:e.jsxs(_,{children:[e.jsx(q,{children:"Check-ins"}),e.jsx(Y,{children:"Total check-ins across all sessions"})]})}),e.jsx(D,{className:"text-center font-semibold",children:e.jsxs(_,{children:[e.jsx(q,{children:"Class Average"}),e.jsx(Y,{children:"Average attendees per session"})]})}),e.jsx(D,{className:"text-center font-semibold",children:e.jsxs(_,{children:[e.jsx(q,{children:"Empty Classes"}),e.jsx(Y,{children:"Number of sessions with 0 attendance"})]})}),e.jsx(D,{className:"text-center font-semibold",children:e.jsxs(_,{children:[e.jsx(q,{children:"Fill Rate %"}),e.jsx(Y,{children:"Average capacity utilization"})]})}),e.jsx(D,{className:"text-center font-semibold",children:e.jsxs(_,{children:[e.jsx(q,{children:"Revenue"}),e.jsx(Y,{children:"Total revenue generated"})]})}),e.jsx(D,{className:"text-center font-semibold",children:e.jsxs(_,{children:[e.jsx(q,{children:"Late Cancellations"}),e.jsx(Y,{children:"Average late cancellations per session"})]})})]})}),e.jsx(Ie,{children:h.classesArray.map((r,s)=>e.jsxs(se,{className:"hover:bg-gray-50/80",children:[e.jsx(d,{children:e.jsx(k,{variant:"outline",className:"bg-purple-50 text-purple-700 font-medium",children:r.className})}),e.jsx(d,{children:e.jsx(k,{variant:"outline",className:"bg-blue-50 text-blue-700",children:r.dayOfWeek})}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ne,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{children:r.time})]})}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($e,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"truncate max-w-32",children:r.location})]})}),e.jsx(d,{children:e.jsx(k,{variant:"outline",className:"bg-green-50 text-green-700",children:r.trainerName})}),e.jsx(d,{className:"text-center font-medium",children:e.jsx(k,{variant:"default",className:"bg-gray-100 text-gray-700",children:r.sessions})}),e.jsx(d,{className:"text-center font-bold text-blue-600",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(J,{className:"w-4 h-4"}),r.attendees]})}),e.jsx(d,{className:"text-center font-bold text-green-600",children:r.classAverage.toFixed(1)}),e.jsx(d,{className:"text-center",children:r.emptyClasses>0?e.jsxs(k,{variant:"outline",className:"bg-red-50 text-red-700",children:[e.jsx(qe,{className:"w-3 h-3 mr-1"}),r.emptyClasses]}):e.jsx(k,{variant:"outline",className:"bg-green-50 text-green-700",children:"0"})}),e.jsx(d,{className:"text-center",children:e.jsxs(k,{variant:r.fillRate>80?"default":r.fillRate>60?"secondary":"outline",className:r.fillRate>80?"bg-green-100 text-green-700":r.fillRate>60?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700",children:[r.fillRate.toFixed(1),"%"]})}),e.jsx(d,{className:"text-center font-medium",children:X(r.revenue)}),e.jsx(d,{className:"text-center",children:e.jsx(k,{variant:"outline",children:r.avgLateCancellations.toFixed(1)})})]},`${h.className}-${s}`))})]})})})]})},h.className))})})]})})},ws=({data:x,title:n,type:S,variant:y,initialCount:R=10})=>{var b;const[t,p]=j.useState("classAverage"),[g,N]=j.useState(R),[T,L]=j.useState(S),[h,r]=j.useState(!1),s=j.useMemo(()=>{const a={};return x.forEach(u=>{let O;T==="classes"?h?O=`${u.cleanedClass}|${u.dayOfWeek}|${u.time}|${u.location}|${u.trainerName}`:O=`${u.cleanedClass}|${u.dayOfWeek}|${u.time}|${u.location}`:O=u.trainerName,O&&(a[O]||(a[O]={name:O,cleanedClass:u.cleanedClass||"",dayOfWeek:u.dayOfWeek||"",time:u.time||"",location:u.location||"",trainerName:u.trainerName||"",totalAttendance:0,avgFillRate:0,totalRevenue:0,sessions:0,classAverage:0}),a[O].totalAttendance+=u.checkedInCount,a[O].totalRevenue+=u.totalPaid,a[O].sessions+=1)}),Object.values(a).forEach(u=>{const z=x.filter($=>T==="classes"?h?$.cleanedClass===u.cleanedClass&&$.dayOfWeek===u.dayOfWeek&&$.time===u.time&&$.location===u.location&&$.trainerName===u.trainerName:$.cleanedClass===u.cleanedClass&&$.dayOfWeek===u.dayOfWeek&&$.time===u.time&&$.location===u.location:$.trainerName===u.trainerName).reduce(($,Ne)=>$+Ne.capacity,0);u.avgFillRate=z>0?u.totalAttendance/z*100:0,u.classAverage=u.sessions>0?u.totalAttendance/u.sessions:0}),Object.values(a).filter(u=>!(u.sessions<2||u.cleanedClass&&u.cleanedClass.toLowerCase().includes("hosted"))).sort((u,O)=>{let z,$;switch(t){case"attendance":z=u.totalAttendance,$=O.totalAttendance;break;case"fillRate":z=u.avgFillRate,$=O.avgFillRate;break;case"revenue":z=u.totalRevenue,$=O.totalRevenue;break;case"classAverage":default:z=u.classAverage,$=O.classAverage;break}return y==="top"?$-z:z-$})},[x,T,h,t,y]),l=s.slice(0,g),o=s.length>g,A=[{value:"classAverage",label:"Class Average",icon:V},{value:"attendance",label:"Total Attendance",icon:J},{value:"fillRate",label:"Fill Rate %",icon:Ss},{value:"revenue",label:"Revenue",icon:be}],v=a=>{switch(t){case"attendance":return E(a.totalAttendance);case"fillRate":return`${a.avgFillRate.toFixed(1)}%`;case"revenue":return X(a.totalRevenue);case"classAverage":default:return a.classAverage.toFixed(1)}},F=a=>T==="classes"?h?`${a.cleanedClass} - ${a.dayOfWeek} ${a.time} (${a.trainerName})`:`${a.cleanedClass} - ${a.dayOfWeek} ${a.time}`:a.trainerName,w=a=>y==="top"?a===0?"bg-yellow-100 text-yellow-800 border-yellow-200":a===1?"bg-gray-100 text-gray-800 border-gray-200":a===2?"bg-orange-100 text-orange-800 border-orange-200":"bg-blue-50 text-blue-700 border-blue-200":"bg-red-50 text-red-700 border-red-200";return e.jsxs(K,{className:"bg-white shadow-sm border border-gray-200",children:[e.jsxs(ae,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(re,{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[y==="top"?e.jsx(Ae,{className:"w-5 h-5 text-green-600"}):e.jsx(aa,{className:"w-5 h-5 text-red-600"}),n]}),e.jsxs(Je,{children:[e.jsx(Qe,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[(b=A.find(a=>a.value===t))==null?void 0:b.label,e.jsx(oe,{className:"w-4 h-4"})]})}),e.jsx(Ze,{className:"bg-white shadow-lg border z-50",align:"end",children:A.map(a=>e.jsxs(es,{onClick:()=>p(a.value),className:"cursor-pointer",children:[e.jsx(a.icon,{className:"w-4 h-4 mr-2"}),a.label]},a.value))})]})]}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs(xs,{type:"single",value:T,onValueChange:a=>a&&L(a),children:[e.jsx(De,{value:"classes","aria-label":"Classes view",children:"Classes"}),e.jsx(De,{value:"trainers","aria-label":"Trainers view",children:"Trainers"})]})}),T==="classes"&&e.jsx("div",{className:"flex justify-center",children:e.jsxs(xs,{type:"single",value:h?"with-trainer":"without-trainer",onValueChange:a=>r(a==="with-trainer"),children:[e.jsx(De,{value:"without-trainer","aria-label":"Group without trainer",children:"Group by Class"}),e.jsx(De,{value:"with-trainer","aria-label":"Group with trainer",children:"Include Trainer"})]})})]}),e.jsxs(B,{className:"p-0",children:[e.jsx("div",{className:"space-y-1 min-h-[600px] overflow-y-auto",children:l.map((a,c)=>e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border ${w(c)}`,children:c+1}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 text-sm mb-1 truncate",children:F(a)}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-1",children:[T==="classes"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{variant:"outline",className:"text-xs px-1.5 py-0.5 bg-blue-50 text-blue-700 border-blue-200",children:a.location}),e.jsxs(k,{variant:"outline",className:"text-xs px-1.5 py-0.5 bg-purple-50 text-purple-700 border-purple-200",children:[a.sessions," sessions"]})]}),T==="trainers"&&e.jsxs(k,{variant:"outline",className:"text-xs px-1.5 py-0.5 bg-green-50 text-green-700 border-green-200",children:[a.sessions," classes taught"]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t==="attendance"&&`${a.sessions} sessions`,t==="fillRate"&&`${E(a.totalAttendance)} attendees`,t==="revenue"&&`Avg: ${X(a.totalRevenue/a.sessions)}`,t==="classAverage"&&`${E(a.totalAttendance)} total attendees`]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-1",children:v(a)}),e.jsx(k,{variant:y==="top"?"default":"destructive",className:"text-xs",children:y==="top"?"High Performer":"Needs Focus"})]})]},a.name))}),o&&e.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50",children:e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>N(g+10),className:"w-full",children:["Show More (",s.length-g," remaining)"]})})]})]})},$a=({data:x})=>{const{filters:n,updateFilters:S,clearFilters:y}=Ps(),[R,t]=j.useState(null),p=j.useMemo(()=>{const s=[...new Set(x.map(v=>v.trainerName).filter(Boolean))].sort(),l=[...new Set(x.map(v=>v.cleanedClass).filter(Boolean))].sort(),o=[...new Set(x.map(v=>v.dayOfWeek).filter(Boolean))].sort(),A=[...new Set(x.map(v=>v.time).filter(Boolean))].sort();return{trainers:s,classTypes:l,daysOfWeek:o,timeSlots:A}},[x]),g=[{key:"trainers",label:"Trainers",icon:J,options:p.trainers,values:n.trainers,description:"Filter by class instructors"},{key:"classTypes",label:"Class Types",icon:Te,options:p.classTypes,values:n.classTypes,description:"Filter by class formats"},{key:"dayOfWeek",label:"Days of Week",icon:U,options:p.daysOfWeek,values:n.dayOfWeek,description:"Filter by day of week"},{key:"timeSlots",label:"Time Slots",icon:ne,options:p.timeSlots,values:n.timeSlots,description:"Filter by class times"}],N=(s,l)=>{const o=[...n[s]],A=o.indexOf(l);A>-1?o.splice(A,1):o.push(l),S({[s]:o})},T=(s,l)=>{S({dateRange:Ce(he({},n.dateRange),{[s]:l})})},L=s=>{S({[s]:[]})},h=g.reduce((s,l)=>s+l.values.length,0)+(n.dateRange.start?1:0)+(n.dateRange.end?1:0),r=({config:s})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s.icon,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("label",{className:"font-medium text-sm",children:s.label}),s.values.length>0&&e.jsx(k,{variant:"secondary",className:"text-xs min-w-[20px] text-center",children:s.values.length})]}),s.values.length>0&&e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>L(s.key),className:"h-6 px-2 text-xs text-muted-foreground hover:text-foreground",children:"Clear"})]}),e.jsxs(Ee,{open:R===s.key,onOpenChange:l=>t(l?s.key:null),children:[e.jsx(Ue,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:"w-full justify-between text-left font-normal h-9",size:"sm",children:[e.jsx("span",{className:"truncate",children:s.values.length>0?`${s.values.length} selected`:`Select ${s.label.toLowerCase()}`}),e.jsx(oe,{className:"h-4 w-4 opacity-50"})]})}),e.jsx(ze,{className:"w-80 p-0",align:"start",children:e.jsxs(ia,{children:[e.jsx(oa,{placeholder:`Search ${s.label.toLowerCase()}...`}),e.jsxs(da,{children:[e.jsxs(xa,{children:["No ",s.label.toLowerCase()," found."]}),e.jsx(ma,{children:s.options.map(l=>e.jsx(ha,{onSelect:()=>N(s.key,l),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:ee("flex h-4 w-4 items-center justify-center rounded-sm border border-primary",s.values.includes(l)?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(ks,{className:"h-3 w-3"})}),e.jsx("span",{children:l})]})},l))})]})]})})]}),s.values.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[s.values.slice(0,3).map(l=>e.jsxs(k,{variant:"secondary",className:"text-xs cursor-pointer hover:bg-destructive/10 min-w-[60px] max-w-[120px] truncate text-center",onClick:()=>N(s.key,l),children:[e.jsx("span",{className:"truncate",children:l}),e.jsx(He,{className:"h-3 w-3 ml-1 flex-shrink-0"})]},l)),s.values.length>3&&e.jsxs(k,{variant:"outline",className:"text-xs min-w-[60px] text-center",children:["+",s.values.length-3," more"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.description})]});return e.jsxs(K,{className:"bg-background shadow-sm border",children:[e.jsx(ae,{className:"border-b pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(re,{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-primary"}),"Session Filters"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[h>0&&e.jsxs(k,{className:"bg-primary text-primary-foreground min-w-[60px] text-center",children:[h," Active"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:y,disabled:h===0,className:"gap-1 h-8",children:[e.jsx(He,{className:"h-4 w-4"}),"Clear All"]})]})]})}),e.jsx(B,{className:"p-6",children:e.jsxs(Ye,{defaultValue:"filters",className:"w-full",children:[e.jsxs(Ge,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsx(te,{value:"filters",children:"Filter Options"}),e.jsx(te,{value:"dateRange",children:"Date Range"})]}),e.jsx(le,{value:"filters",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map(s=>e.jsx(r,{config:s},s.key))})}),e.jsx(le,{value:"dateRange",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"font-medium text-sm flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Start Date"]}),n.dateRange.start&&e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>T("start",null),className:"h-6 px-2 text-xs",children:"Clear"})]}),e.jsxs(Ee,{children:[e.jsx(Ue,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:"w-full justify-start text-left font-normal h-9",children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),n.dateRange.start?ys(n.dateRange.start,"PPP"):"Select start date"]})}),e.jsx(ze,{className:"w-auto p-0",align:"start",children:e.jsx(ms,{mode:"single",selected:n.dateRange.start||void 0,onSelect:s=>T("start",s||null),disabled:s=>n.dateRange.end?s>n.dateRange.end:!1,initialFocus:!0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"font-medium text-sm flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"End Date"]}),n.dateRange.end&&e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>T("end",null),className:"h-6 px-2 text-xs",children:"Clear"})]}),e.jsxs(Ee,{children:[e.jsx(Ue,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:"w-full justify-start text-left font-normal h-9",children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),n.dateRange.end?ys(n.dateRange.end,"PPP"):"Select end date"]})}),e.jsx(ze,{className:"w-auto p-0",align:"start",children:e.jsx(ms,{mode:"single",selected:n.dateRange.end||void 0,onSelect:s=>T("end",s||null),disabled:s=>n.dateRange.start?s<n.dateRange.start:!1,initialFocus:!0})})]})]})]})})]})})]})},Fe=[{id:"all",name:"All Locations",fullName:"All Locations"},{id:"kwality",name:"Kwality House, Kemps Corner",fullName:"Kwality House, Kemps Corner"},{id:"supreme",name:"Supreme HQ, Bandra",fullName:"Supreme HQ, Bandra"},{id:"kenkere",name:"Kenkere House",fullName:"Kenkere House"}],Oa=j.memo(({location:x,isActive:n})=>e.jsxs("div",{className:"flex items-center gap-2",children:[x.id==="all"?e.jsx(_e,{className:"w-4 h-4"}):e.jsx($e,{className:"w-4 h-4"}),e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"font-bold",children:x.name})})]}));j.memo(({title:x,value:n,description:S})=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:n}),e.jsx("div",{className:"text-sm text-slate-300 font-medium",children:S})]}));const qa=()=>{const x=ta(),{data:n,loading:S,error:y,refetch:R}=Ls(),[t,p]=j.useState("all"),[g,N]=j.useState(!1),T=$s(n||[]),L=j.useMemo(()=>{if(t==="all")return T;const s=Fe.find(l=>l.id===t);return s?T.filter(l=>{var A;if(l.location===s.fullName)return!0;const o=((A=l.location)==null?void 0:A.toLowerCase())||"";return s.fullName.toLowerCase(),!!(s.id==="kwality"&&o.includes("kwality")||s.id==="supreme"&&o.includes("supreme")||s.id==="kenkere"&&o.includes("kenkere"))}):T},[T,t]),h=j.useMemo(()=>Fe.slice(1).map(l=>{const o=(n||[]).filter(w=>{var a;const b=((a=w.location)==null?void 0:a.toLowerCase())||"";return l.fullName.toLowerCase(),l.id==="kwality"&&b.includes("kwality")||l.id==="supreme"&&b.includes("supreme")||l.id==="kenkere"&&b.includes("kenkere")?!0:w.location===l.fullName}),A=o.length,v=o.reduce((w,b)=>w+(b.checkedInCount||0),0),F=o.length>0?Math.round(o.reduce((w,b)=>w+(b.fillPercentage||0),0)/o.length):0;return{location:l.name.split(",")[0],sessions:E(A),attendance:v.toLocaleString(),fillRate:`${F}%`}}),[n]),r=j.useCallback(s=>{p(s)},[]);return S?null:y?e.jsx("div",{className:"min-h-screen bg-gray-50/30 flex items-center justify-center p-4",children:e.jsx(K,{className:`p-8 ${ke.card.background} ${ke.card.shadow} max-w-md`,children:e.jsxs(B,{className:"text-center space-y-4",children:[e.jsx(ds,{className:"w-12 h-12 text-red-600 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Connection Error"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:y})]}),e.jsxs(M,{onClick:R,className:"gap-2",children:[e.jsx(ds,{className:"w-4 h-4"}),"Retry Connection"]})]})})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white min-h-[500px]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-indigo-600/20"}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_80%,_rgba(120,119,198,0.3),_transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_80%_20%,_rgba(255,255,255,0.1),_transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_40%_40%,_rgba(120,119,198,0.2),_transparent_50%)]"})]}),e.jsx("div",{className:"relative px-8 py-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs(M,{onClick:()=>x("/"),variant:"outline",size:"sm",className:"gap-2 bg-white/10 backdrop-blur-sm border-white/20 text-white hover:bg-white/20 hover:border-white/30 transition-all duration-200",children:[e.jsx(la,{className:"w-4 h-4"}),"Dashboard"]}),e.jsx(ua,{sessionsData:L,defaultFileName:"sessions-data",variant:"outline",size:"sm"})]}),e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-full px-6 py-3 border border-white/20",children:[e.jsx(V,{className:"w-5 h-5 text-blue-300"}),e.jsx("span",{className:"font-semibold text-white",children:"Session Analytics"})]}),e.jsx("h1",{className:"text-6xl md:text-7xl font-black bg-gradient-to-r from-white via-blue-100 to-indigo-200 bg-clip-text text-transparent",children:"Sessions Dashboard"}),e.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto leading-relaxed",children:"Comprehensive analysis of class performance, attendance patterns, and operational insights across all studio locations"}),e.jsx("div",{className:"flex items-center justify-center gap-12 mt-16",children:h.map((s,l)=>e.jsxs(Me.Fragment,{children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:s.sessions}),e.jsx("div",{className:"text-sm text-slate-300 font-medium",children:s.location}),e.jsx("div",{className:"text-xs text-slate-400",children:"Sessions"})]}),l<h.length-1&&e.jsx("div",{className:"w-px h-16 bg-white/20"})]},s.location))}),e.jsx("div",{className:"flex items-center justify-center gap-12 mt-8",children:h.map((s,l)=>e.jsxs(Me.Fragment,{children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white/90 mb-1",children:s.attendance}),e.jsx("div",{className:"text-xs text-slate-400",children:"Total Attendance"})]}),l<h.length-1&&e.jsx("div",{className:"w-px h-12 bg-white/20"})]},`attendance-${s.location}`))})]})]})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8 space-y-8",children:[e.jsx($a,{data:n||[]}),e.jsxs("div",{className:"flex justify-between items-center animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(na,{className:"w-5 h-5 text-indigo-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Data Source: Sessions Sheet"}),e.jsx(k,{variant:"outline",className:"text-indigo-700 border-indigo-200",children:"149ILDqovzZA6FRUJKOwzutWdVqmqWBtWPfzG3A0zxTI"})]}),e.jsxs(M,{variant:"outline",size:"sm",className:"gap-2 text-indigo-700 border-indigo-200 hover:bg-indigo-50",onClick:()=>N(!0),children:[e.jsx(As,{className:"w-4 h-4"}),"View Source Data"]})]}),e.jsx(K,{className:`${ke.card.background} ${ke.card.shadow} ${ke.card.border} overflow-hidden`,children:e.jsx(B,{className:"p-2",children:e.jsxs(Ye,{value:t,onValueChange:r,className:"w-full",children:[e.jsx(Ge,{className:"grid w-full grid-cols-4 bg-gradient-to-r from-slate-100 to-slate-200 p-2 rounded-2xl h-auto gap-2",children:Fe.map(s=>e.jsx(te,{value:s.id,className:"rounded-xl px-6 py-4 font-semibold text-sm transition-all duration-300",children:e.jsx(Oa,{location:s,isActive:t===s.id})},s.id))}),Fe.map(s=>e.jsxs(le,{value:s.id,className:"space-y-8 mt-8",children:[e.jsx(Fa,{data:L}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ws,{data:L,title:"Top Performing Classes",type:"classes",variant:"top",initialCount:10}),e.jsx(ws,{data:L,title:"Bottom Performing Classes",type:"classes",variant:"bottom",initialCount:10})]}),e.jsx(Da,{data:L}),e.jsx(La,{data:L}),e.jsx(Ma,{data:L})]},s.id))]})})})]}),e.jsx(ga,{open:g,onOpenChange:N,sources:[{name:"Sessions",sheetName:"Sessions",spreadsheetId:"149ILDqovzZA6FRUJKOwzutWdVqmqWBtWPfzG3A0zxTI",data:n||[]}]})]})};export{Ha as S,_a as U,qa as a,ee as c,Ps as u};
