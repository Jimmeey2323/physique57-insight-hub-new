var Be=Object.defineProperty,Fe=Object.defineProperties;var Ae=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var Te=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable;var ce=(l,j,r)=>j in l?Be(l,j,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[j]=r,z=(l,j)=>{for(var r in j||(j={}))Te.call(j,r)&&ce(l,r,j[r]);if(oe)for(var r of oe(j))De.call(j,r)&&ce(l,r,j[r]);return l},O=(l,j)=>Fe(l,Ae(j));import{r as R,j as e,g as T,T as F,i as D,U as A,h as E,F as Ne,X as ye,C as $e,b as Ie,M as de,c as M,d as me,Z as L,Y as q,N as ae,O as le,w as Ee,s as K,V as xe,v as Me,a6 as Le,e as te,a7 as Ue,a8 as ze,E as re,Q as Oe,o as Ve}from"./react-vendor-BrAkf1Ej.js";import{C as f,j as S,k as C,c as v,a as qe,b as Ye,B as P,d as U,e as Ke,L as H,S as W,f as G,g as X,h as Z,i as Y,r as fe,s as ve,t as $,u as I,Z as He,_ as We,$ as Ge,a0 as Xe}from"./ui-components-_bEsYxhv.js";import{c as d,b as Q,f as _,o as Ze,p as V}from"./utils-hni-AijI.js";import{R as J,B as he,C as ue,X as ge,Y as je,T as ee,a as pe,c as se,P as Qe,d as _e,e as Je}from"./chart-vendor-CfJT7qML.js";const es={"Power Cycle":"#8B5CF6",Barre:"#06B6D4",Strength:"#10B981"},ps=({data:l})=>{const j=R.useMemo(()=>{const o=l.sessions.reduce((s,i)=>{const h=i.cleanedClass||"Unknown";let t="Other";return h.toLowerCase().includes("cycle")||h.toLowerCase().includes("spinning")?t="Power Cycle":h.toLowerCase().includes("barre")?t="Barre":(h.toLowerCase().includes("strength")||h.toLowerCase().includes("weights"))&&(t="Strength"),s[t]||(s[t]={category:t,sessions:0,totalAttendance:0,totalCapacity:0,revenue:0,uniqueInstructors:new Set}),s[t].sessions+=1,s[t].totalAttendance+=i.checkedInCount||0,s[t].totalCapacity+=i.capacity||0,s[t].uniqueInstructors.add(i.instructor),s},{});return l.payroll.forEach(s=>{s.cycleSessions>0&&(o["Power Cycle"]||(o["Power Cycle"]={category:"Power Cycle",sessions:0,totalAttendance:0,totalCapacity:0,revenue:0,uniqueInstructors:new Set}),o["Power Cycle"].revenue+=s.cyclePaid||0),s.barreSessions>0&&(o.Barre||(o.Barre={category:"Barre",sessions:0,totalAttendance:0,totalCapacity:0,revenue:0,uniqueInstructors:new Set}),o.Barre.revenue+=s.barrePaid||0),s.strengthSessions>0&&(o.Strength||(o.Strength={category:"Strength",sessions:0,totalAttendance:0,totalCapacity:0,revenue:0,uniqueInstructors:new Set}),o.Strength.revenue+=s.strengthPaid||0)}),Object.values(o).filter(s=>["Power Cycle","Barre","Strength"].includes(s.category)).map(s=>O(z({},s),{avgAttendance:s.sessions>0?s.totalAttendance/s.sessions:0,fillRate:s.totalCapacity>0?s.totalAttendance/s.totalCapacity*100:0,instructorCount:s.uniqueInstructors.size,revenuePerSession:s.sessions>0?s.revenue/s.sessions:0}))},[l.sessions,l.payroll]),r=R.useMemo(()=>j.map(o=>({category:o.category,sessions:o.sessions,attendance:o.totalAttendance,avgAttendance:o.avgAttendance,fillRate:o.fillRate,revenue:o.revenue,instructors:o.instructorCount,color:es[o.category]||"#9CA3AF"})),[j]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(f,{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-200",children:e.jsx(S,{children:e.jsxs(C,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(T,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"PowerCycle vs Barre vs Strength Analysis"}),e.jsx("p",{className:"text-gray-600 font-normal",children:"Comprehensive performance comparison across class formats"})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:r.map(o=>e.jsx(f,{className:"bg-white shadow-xl border-0 overflow-hidden",children:e.jsx(v,{className:"p-0",children:e.jsxs("div",{className:"p-6 text-white relative overflow-hidden",style:{backgroundColor:o.color},children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 transform translate-x-8 -translate-y-8 opacity-20",children:e.jsx(T,{className:"w-20 h-20"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:o.category}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Sessions"}),e.jsx("span",{className:"font-bold",children:d(o.sessions)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Total Attendance"}),e.jsx("span",{className:"font-bold",children:d(o.attendance)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Avg per Session"}),e.jsx("span",{className:"font-bold",children:o.avgAttendance.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Fill Rate"}),e.jsx("span",{className:"font-bold",children:Q(o.fillRate)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Revenue"}),e.jsx("span",{className:"font-bold",children:_(o.revenue)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Instructors"}),e.jsx("span",{className:"font-bold",children:o.instructors})]})]})]})]})})},o.category))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(f,{className:"bg-white shadow-xl border-0",children:[e.jsx(S,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-purple-600"}),"Sessions & Attendance Comparison"]})}),e.jsx(v,{children:e.jsx(J,{width:"100%",height:300,children:e.jsxs(he,{data:r,children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(ge,{dataKey:"category"}),e.jsx(je,{}),e.jsx(ee,{}),e.jsx(pe,{}),e.jsx(se,{dataKey:"sessions",fill:"#8B5CF6",name:"Sessions"}),e.jsx(se,{dataKey:"attendance",fill:"#06B6D4",name:"Total Attendance"})]})})})]}),e.jsxs(f,{className:"bg-white shadow-xl border-0",children:[e.jsx(S,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-green-600"}),"Revenue Comparison"]})}),e.jsx(v,{children:e.jsx(J,{width:"100%",height:300,children:e.jsxs(he,{data:r,children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(ge,{dataKey:"category"}),e.jsx(je,{}),e.jsx(ee,{formatter:o=>_(o)}),e.jsx(pe,{}),e.jsx(se,{dataKey:"revenue",fill:"#10B981",name:"Revenue ($)"})]})})})]}),e.jsxs(f,{className:"bg-white shadow-xl border-0",children:[e.jsx(S,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-blue-600"}),"Fill Rate Distribution"]})}),e.jsx(v,{children:e.jsx(J,{width:"100%",height:300,children:e.jsxs(Qe,{children:[e.jsx(_e,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:o=>`${o.category}: ${Q(o.fillRate)}`,outerRadius:80,fill:"#8884d8",dataKey:"fillRate",children:r.map((o,s)=>e.jsx(Je,{fill:o.color},`cell-${s}`))}),e.jsx(ee,{formatter:o=>[`${o.toFixed(1)}%`,"Fill Rate"]})]})})})]}),e.jsxs(f,{className:"bg-white shadow-xl border-0",children:[e.jsx(S,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-orange-600"}),"Performance Summary"]})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-4",children:r.map(o=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border-l-4",style:{borderLeftColor:o.color,backgroundColor:`${o.color}10`},children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:o.category}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[d(o.sessions)," sessions"]}),e.jsxs("span",{children:[d(o.attendance)," attendees"]}),e.jsxs("span",{children:[Q(o.fillRate)," fill rate"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-lg",children:_(o.revenue)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[o.instructors," instructors"]})]})]},o.category))})})]})]})]})},ss=({data:l,selectedLocation:j,onLocationChange:r,selectedPeriod:o,onPeriodChange:s,selectedTrainer:i,onTrainerChange:h})=>{var x;const[t,n]=R.useState(!1),a=R.useMemo(()=>{const p=[...new Set(l.map(b=>b.location))].filter(Boolean).sort(),k=[...new Set(l.map(b=>b.teacherName))].filter(Boolean).sort(),B=[...new Set(l.map(b=>b.monthYear))].filter(Boolean).sort();return{locations:p,trainers:k,monthYears:B}},[l]),g=[{value:"all",label:"All Periods"},...a.monthYears.map(p=>({value:p,label:p}))],m=j!=="all"||o!=="all"||i!=="all",y=[j!=="all"?1:0,o!=="all"?1:0,i!=="all"?1:0].filter(p=>p>0).length,c=()=>{r("all"),s("all"),h("all")};return e.jsx(f,{className:"bg-gradient-to-br from-white via-blue-50/30 to-purple-50/20 border-0 shadow-xl overflow-hidden",children:e.jsxs(qe,{open:t,onOpenChange:n,children:[e.jsx(Ye,{asChild:!0,children:e.jsx(S,{className:"cursor-pointer hover:bg-gray-50/50 transition-colors bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:e.jsxs(C,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ne,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"PowerCycle vs Barre vs Strength Filters"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Customize your comprehensive analysis"})]}),m&&e.jsxs(P,{className:"bg-white/20 text-white border-white/30",children:[y," Active"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[m&&e.jsxs(U,{variant:"outline",size:"sm",onClick:p=>{p.stopPropagation(),c()},className:"bg-white/10 border-white/30 text-white hover:bg-white/20",children:[e.jsx(ye,{className:"w-4 h-4 mr-1"}),"Clear All"]}),t?e.jsx($e,{className:"w-4 h-4"}):e.jsx(Ie,{className:"w-4 h-4"})]})]})})}),e.jsx(Ke,{children:e.jsxs(v,{className:"p-8 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h4",{className:"text-lg font-semibold text-slate-800",children:"Advanced Filter Options"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(H,{htmlFor:"location-select",className:"text-slate-700 flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4 text-green-500"}),"Location"]}),e.jsxs(W,{value:j,onValueChange:r,children:[e.jsx(G,{id:"location-select",className:"bg-white border-slate-200",children:e.jsx(X,{placeholder:"Select location"})}),e.jsxs(Z,{className:"bg-white border-slate-200",children:[e.jsx(Y,{value:"all",children:"All Locations"}),a.locations.map(p=>e.jsx(Y,{value:p,children:p},p))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(H,{htmlFor:"period-select",className:"text-slate-700 flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-blue-500"}),"Period"]}),e.jsxs(W,{value:o,onValueChange:s,children:[e.jsx(G,{id:"period-select",className:"bg-white border-slate-200",children:e.jsx(X,{placeholder:"Select period"})}),e.jsx(Z,{className:"bg-white border-slate-200",children:g.map(p=>e.jsx(Y,{value:p.value,children:p.label},p.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(H,{htmlFor:"trainer-select",className:"text-slate-700 flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-purple-500"}),"Trainer"]}),e.jsxs(W,{value:i,onValueChange:h,children:[e.jsx(G,{id:"trainer-select",className:"bg-white border-slate-200",children:e.jsx(X,{placeholder:"Select trainer"})}),e.jsxs(Z,{className:"bg-white border-slate-200",children:[e.jsx(Y,{value:"all",children:"All Trainers"}),a.trainers.map(p=>e.jsx(Y,{value:p,children:p},p))]})]})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[j!=="all"&&e.jsxs(P,{variant:"secondary",className:"bg-green-100 text-green-800",children:[e.jsx(de,{className:"w-3 h-3 mr-1"}),j]}),o!=="all"&&e.jsxs(P,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[e.jsx(M,{className:"w-3 h-3 mr-1"}),(x=g.find(p=>p.value===o))==null?void 0:x.label]}),i!=="all"&&e.jsxs(P,{variant:"secondary",className:"bg-purple-100 text-purple-800",children:[e.jsx(me,{className:"w-3 h-3 mr-1"}),i]})]}),e.jsxs("div",{className:"text-sm text-slate-600",children:[l.length," total records available"]})]})})]})})]})})},ts=({data:l,onItemClick:j})=>{const r=R.useMemo(()=>{if(!l.length)return null;const s={totalSessions:l.reduce((u,N)=>u+(N.cycleSessions||0),0),emptySessions:l.reduce((u,N)=>u+(N.emptyCycleSessions||0),0),nonEmptySessions:l.reduce((u,N)=>u+(N.nonEmptyCycleSessions||0),0),totalCustomers:l.reduce((u,N)=>u+(N.cycleCustomers||0),0),totalRevenue:l.reduce((u,N)=>u+(N.cyclePaid||0),0)},i={totalSessions:l.reduce((u,N)=>u+(N.barreSessions||0),0),emptySessions:l.reduce((u,N)=>u+(N.emptyBarreSessions||0),0),nonEmptySessions:l.reduce((u,N)=>u+(N.nonEmptyBarreSessions||0),0),totalCustomers:l.reduce((u,N)=>u+(N.barreCustomers||0),0),totalRevenue:l.reduce((u,N)=>u+(N.barrePaid||0),0)},h={totalSessions:l.reduce((u,N)=>u+(N.strengthSessions||0),0),emptySessions:l.reduce((u,N)=>u+(N.emptyStrengthSessions||0),0),nonEmptySessions:l.reduce((u,N)=>u+(N.nonEmptyStrengthSessions||0),0),totalCustomers:l.reduce((u,N)=>u+(N.strengthCustomers||0),0),totalRevenue:l.reduce((u,N)=>u+(N.strengthPaid||0),0)},t=s.totalSessions+i.totalSessions+h.totalSessions,n=s.totalRevenue+i.totalRevenue+h.totalRevenue,a=s.totalCustomers+i.totalCustomers+h.totalCustomers,g=s.emptySessions+i.emptySessions+h.emptySessions,m=l.reduce((u,N)=>u+(N.new||0),0),y=l.reduce((u,N)=>u+(N.converted||0),0),c=l.reduce((u,N)=>u+(N.retained||0),0),x=s.totalSessions>0?(s.totalSessions-s.emptySessions)/s.totalSessions*100:0,p=i.totalSessions>0?(i.totalSessions-i.emptySessions)/i.totalSessions*100:0,k=h.totalSessions>0?(h.totalSessions-h.emptySessions)/h.totalSessions*100:0,B=s.nonEmptySessions>0?s.totalCustomers/s.nonEmptySessions:0,b=i.nonEmptySessions>0?i.totalCustomers/i.nonEmptySessions:0,w=h.nonEmptySessions>0?h.totalCustomers/h.nonEmptySessions:0;return{powerCycle:s,barre:i,strength:h,totals:{sessions:t,revenue:n,customers:a,emptySessions:g,new:m,converted:y,retained:c},fillRates:{powerCycle:x,barre:p,strength:k},averages:{powerCycle:B,barre:b,strength:w}}},[l]);if(!r)return null;const o=[{title:"PowerCycle Sessions",value:d(r.powerCycle.totalSessions),icon:L,color:"from-blue-500 to-blue-600",bgColor:"from-blue-50 to-blue-100",data:{type:"powercycle",metric:"sessions",value:r.powerCycle.totalSessions}},{title:"PowerCycle Revenue",value:`₹${d(r.powerCycle.totalRevenue)}`,icon:D,color:"from-blue-500 to-blue-600",bgColor:"from-blue-50 to-blue-100",data:{type:"powercycle",metric:"revenue",value:r.powerCycle.totalRevenue}},{title:"PowerCycle Fill Rate",value:`${r.fillRates.powerCycle.toFixed(1)}%`,icon:F,color:"from-blue-500 to-blue-600",bgColor:"from-blue-50 to-blue-100",data:{type:"powercycle",metric:"fillRate",value:r.fillRates.powerCycle}},{title:"Barre Sessions",value:d(r.barre.totalSessions),icon:T,color:"from-pink-500 to-pink-600",bgColor:"from-pink-50 to-pink-100",data:{type:"barre",metric:"sessions",value:r.barre.totalSessions}},{title:"Barre Revenue",value:`₹${d(r.barre.totalRevenue)}`,icon:D,color:"from-pink-500 to-pink-600",bgColor:"from-pink-50 to-pink-100",data:{type:"barre",metric:"revenue",value:r.barre.totalRevenue}},{title:"Barre Fill Rate",value:`${r.fillRates.barre.toFixed(1)}%`,icon:F,color:"from-pink-500 to-pink-600",bgColor:"from-pink-50 to-pink-100",data:{type:"barre",metric:"fillRate",value:r.fillRates.barre}},{title:"Strength Sessions",value:d(r.strength.totalSessions),icon:q,color:"from-green-500 to-green-600",bgColor:"from-green-50 to-green-100",data:{type:"strength",metric:"sessions",value:r.strength.totalSessions}},{title:"Strength Revenue",value:`₹${d(r.strength.totalRevenue)}`,icon:D,color:"from-green-500 to-green-600",bgColor:"from-green-50 to-green-100",data:{type:"strength",metric:"revenue",value:r.strength.totalRevenue}},{title:"Strength Fill Rate",value:`${r.fillRates.strength.toFixed(1)}%`,icon:F,color:"from-green-500 to-green-600",bgColor:"from-green-50 to-green-100",data:{type:"strength",metric:"fillRate",value:r.fillRates.strength}},{title:"Total New Members",value:d(r.totals.new),icon:ae,color:"from-purple-500 to-purple-600",bgColor:"from-purple-50 to-purple-100",data:{type:"overall",metric:"new",value:r.totals.new}},{title:"Total Converted",value:d(r.totals.converted),icon:le,color:"from-indigo-500 to-indigo-600",bgColor:"from-indigo-50 to-indigo-100",data:{type:"overall",metric:"converted",value:r.totals.converted}},{title:"Total Retained",value:d(r.totals.retained),icon:A,color:"from-teal-500 to-teal-600",bgColor:"from-teal-50 to-teal-100",data:{type:"overall",metric:"retained",value:r.totals.retained}}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:o.map((s,i)=>e.jsx(f,{className:`bg-gradient-to-br ${s.bgColor} border-0 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer group`,onClick:()=>j(s.data),children:e.jsxs(v,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${s.color} rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300`,children:e.jsx(s.icon,{className:"w-6 h-6 text-white"})}),e.jsx(P,{variant:"secondary",className:"bg-white/50 text-gray-700",children:s.data.type.charAt(0).toUpperCase()+s.data.type.slice(1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:s.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.value})]})]})},i))}),e.jsxs(f,{className:"bg-gradient-to-br from-white via-gray-50/30 to-blue-50/20 border-0 shadow-xl",children:[e.jsx(S,{children:e.jsxs(C,{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx(T,{className:"w-6 h-6 text-blue-600"}),"Format Performance Summary"]})}),e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(L,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-900",children:"PowerCycle"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Sessions:"}),e.jsx("span",{className:"font-medium",children:d(r.powerCycle.totalSessions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Revenue:"}),e.jsxs("span",{className:"font-medium",children:["₹",d(r.powerCycle.totalRevenue)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Avg/Session:"}),e.jsx("span",{className:"font-medium",children:r.averages.powerCycle.toFixed(1)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-4 border border-pink-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(T,{className:"w-5 h-5 text-pink-600"}),e.jsx("h4",{className:"font-semibold text-pink-900",children:"Barre"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-pink-700",children:"Sessions:"}),e.jsx("span",{className:"font-medium",children:d(r.barre.totalSessions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-pink-700",children:"Revenue:"}),e.jsxs("span",{className:"font-medium",children:["₹",d(r.barre.totalRevenue)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-pink-700",children:"Avg/Session:"}),e.jsx("span",{className:"font-medium",children:r.averages.barre.toFixed(1)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(q,{className:"w-5 h-5 text-green-600"}),e.jsx("h4",{className:"font-semibold text-green-900",children:"Strength Lab"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Sessions:"}),e.jsx("span",{className:"font-medium",children:d(r.strength.totalSessions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Revenue:"}),e.jsxs("span",{className:"font-medium",children:["₹",d(r.strength.totalRevenue)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Avg/Session:"}),e.jsx("span",{className:"font-medium",children:r.averages.strength.toFixed(1)})]})]})]})]})})]})]})},be=({data:l,onItemClick:j,showDetailed:r=!1})=>{const o=R.useMemo(()=>{if(!l.length)return null;const t={sessions:l.reduce((c,x)=>c+(x.cycleSessions||0),0),emptySessions:l.reduce((c,x)=>c+(x.emptyCycleSessions||0),0),customers:l.reduce((c,x)=>c+(x.cycleCustomers||0),0),revenue:l.reduce((c,x)=>c+(x.cyclePaid||0),0)},n={sessions:l.reduce((c,x)=>c+(x.barreSessions||0),0),emptySessions:l.reduce((c,x)=>c+(x.emptyBarreSessions||0),0),customers:l.reduce((c,x)=>c+(x.barreCustomers||0),0),revenue:l.reduce((c,x)=>c+(x.barrePaid||0),0)},a={sessions:l.reduce((c,x)=>c+(x.strengthSessions||0),0),emptySessions:l.reduce((c,x)=>c+(x.emptyStrengthSessions||0),0),customers:l.reduce((c,x)=>c+(x.strengthCustomers||0),0),revenue:l.reduce((c,x)=>c+(x.strengthPaid||0),0)},g=O(z({},t),{nonEmptySessions:t.sessions-t.emptySessions,fillRate:t.sessions>0?(t.sessions-t.emptySessions)/t.sessions*100:0,avgCustomersPerSession:t.sessions-t.emptySessions>0?t.customers/(t.sessions-t.emptySessions):0,revenuePerSession:t.sessions>0?t.revenue/t.sessions:0,revenuePerCustomer:t.customers>0?t.revenue/t.customers:0}),m=O(z({},n),{nonEmptySessions:n.sessions-n.emptySessions,fillRate:n.sessions>0?(n.sessions-n.emptySessions)/n.sessions*100:0,avgCustomersPerSession:n.sessions-n.emptySessions>0?n.customers/(n.sessions-n.emptySessions):0,revenuePerSession:n.sessions>0?n.revenue/n.sessions:0,revenuePerCustomer:n.customers>0?n.revenue/n.customers:0}),y=O(z({},a),{nonEmptySessions:a.sessions-a.emptySessions,fillRate:a.sessions>0?(a.sessions-a.emptySessions)/a.sessions*100:0,avgCustomersPerSession:a.sessions-a.emptySessions>0?a.customers/(a.sessions-a.emptySessions):0,revenuePerSession:a.sessions>0?a.revenue/a.sessions:0,revenuePerCustomer:a.customers>0?a.revenue/a.customers:0});return{powerCycle:g,barre:m,strength:y}},[l]);if(!o)return null;const s=(t,n=!0)=>{const a={powerCycle:o.powerCycle[t],barre:o.barre[t],strength:o.strength[t]};return Object.entries(a).sort(([,m],[,y])=>n?y-m:m-y)[0][0]},i=(t,n)=>{switch(n){case"percentage":return`${t.toFixed(1)}%`;case"currency":return`₹${d(t)}`;case"decimal":return t.toFixed(1);default:return d(t)}},h=[{key:"sessions",label:"Total Sessions",icon:M,type:"number",higherIsBetter:!0},{key:"revenue",label:"Total Revenue",icon:D,type:"currency",higherIsBetter:!0},{key:"customers",label:"Total Customers",icon:A,type:"number",higherIsBetter:!0},{key:"fillRate",label:"Fill Rate",icon:F,type:"percentage",higherIsBetter:!0},{key:"emptySessions",label:"Empty Sessions",icon:Ee,type:"number",higherIsBetter:!1},{key:"avgCustomersPerSession",label:"Avg Customers/Session",icon:A,type:"decimal",higherIsBetter:!0},...r?[{key:"revenuePerSession",label:"Revenue/Session",icon:D,type:"currency",higherIsBetter:!0},{key:"revenuePerCustomer",label:"Revenue/Customer",icon:D,type:"currency",higherIsBetter:!0},{key:"nonEmptySessions",label:"Non-Empty Sessions",icon:M,type:"number",higherIsBetter:!0}]:[]];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(f,{className:"bg-gradient-to-br from-white via-yellow-50/30 to-amber-50/20 border-0 shadow-xl",children:[e.jsx(S,{className:"bg-gradient-to-r from-yellow-500 to-amber-500 text-white",children:e.jsxs(C,{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx(E,{className:"w-6 h-6"}),"Performance Comparison Dashboard"]})}),e.jsx(v,{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Object.entries(o).map(([t,n])=>e.jsxs("div",{className:`bg-gradient-to-br ${t==="powerCycle"?"from-blue-50 to-blue-100 border-blue-200":t==="barre"?"from-pink-50 to-pink-100 border-pink-200":"from-green-50 to-green-100 border-green-200"} rounded-xl p-4 border cursor-pointer hover:shadow-lg transition-all duration-300`,onClick:()=>j({type:"format",format:t,data:n}),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t==="powerCycle"&&e.jsx(L,{className:"w-6 h-6 text-blue-600"}),t==="barre"&&e.jsx(T,{className:"w-6 h-6 text-pink-600"}),t==="strength"&&e.jsx(q,{className:"w-6 h-6 text-green-600"}),e.jsx("h3",{className:`font-bold text-lg ${t==="powerCycle"?"text-blue-900":t==="barre"?"text-pink-900":"text-green-900"}`,children:t==="powerCycle"?"PowerCycle":t==="barre"?"Barre":"Strength Lab"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Sessions:"}),e.jsx("span",{className:"font-medium",children:d(n.sessions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Revenue:"}),e.jsxs("span",{className:"font-medium",children:["₹",d(n.revenue)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Fill Rate:"}),e.jsxs("span",{className:"font-medium",children:[n.fillRate.toFixed(1),"%"]})]})]})]},t))})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(t=>{const n=s(t.key,t.higherIsBetter);return e.jsxs(f,{className:"bg-white border border-gray-200 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer",onClick:()=>j({type:"metric",metric:t.key,data:o}),children:[e.jsx(S,{className:"pb-3",children:e.jsxs(C,{className:"text-sm font-medium flex items-center gap-2 text-gray-700",children:[e.jsx(t.icon,{className:"w-4 h-4"}),t.label]})}),e.jsx(v,{className:"pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"PowerCycle"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:i(o.powerCycle[t.key],t.type)}),n==="powerCycle"&&e.jsxs(P,{className:"bg-green-100 text-green-800 text-xs",children:[e.jsx(E,{className:"w-3 h-3 mr-1"}),"Winner"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Barre"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:i(o.barre[t.key],t.type)}),n==="barre"&&e.jsxs(P,{className:"bg-green-100 text-green-800 text-xs",children:[e.jsx(E,{className:"w-3 h-3 mr-1"}),"Winner"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Strength"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:i(o.strength[t.key],t.type)}),n==="strength"&&e.jsxs(P,{className:"bg-green-100 text-green-800 text-xs",children:[e.jsx(E,{className:"w-3 h-3 mr-1"}),"Winner"]})]})]})]})})]},t.key)})})]})},rs=({data:l,onItemClick:j})=>{const[r,o]=R.useState("revenue"),[s,i]=R.useState("all"),h=[{key:"revenue",label:"Total Revenue",icon:D,description:"Highest earning trainers",higherIsBetter:!0},{key:"sessions",label:"Total Sessions",icon:M,description:"Most active trainers",higherIsBetter:!0},{key:"customers",label:"Total Customers",icon:A,description:"Highest customer engagement",higherIsBetter:!0},{key:"fillRate",label:"Fill Rate",icon:F,description:"Best session utilization",higherIsBetter:!0},{key:"emptySessions",label:"Empty Sessions",icon:K,description:"Least empty sessions",higherIsBetter:!1},{key:"newMembers",label:"New Members",icon:ae,description:"Most new member acquisitions",higherIsBetter:!0},{key:"conversion",label:"Conversion Rate",icon:le,description:"Best conversion performance",higherIsBetter:!0},{key:"retention",label:"Retention Rate",icon:A,description:"Best member retention",higherIsBetter:!0},{key:"avgCustomers",label:"Avg Customers/Session",icon:F,description:"Best session efficiency",higherIsBetter:!0}],t=R.useMemo(()=>{if(!l.length)return[];const m=l.map(c=>{var ne,ie;const x=c.totalSessions||0,p=c.totalEmptySessions||0,k=c.totalPaid||0,B=c.totalCustomers||0,b=c.new||0;c.converted,c.retained;const w=c.cyclePaid||0,u=c.barrePaid||0,N=c.strengthPaid||0,we=c.cycleSessions||0,Se=c.barreSessions||0,Ce=c.strengthSessions||0,ke=c.cycleCustomers||0,Re=c.barreCustomers||0,Pe=c.strengthCustomers||0;return O(z({},c),{revenue:s==="all"?k:s==="powercycle"?w:s==="barre"?u:N,sessions:s==="all"?x:s==="powercycle"?we:s==="barre"?Se:Ce,customers:s==="all"?B:s==="powercycle"?ke:s==="barre"?Re:Pe,emptySessions:s==="all"?p:s==="powercycle"?c.emptyCycleSessions||0:s==="barre"?c.emptyBarreSessions||0:c.emptyStrengthSessions||0,fillRate:x>0?(x-p)/x*100:0,newMembers:b,conversion:parseFloat(((ne=c.conversion)==null?void 0:ne.replace("%",""))||"0"),retention:parseFloat(((ie=c.retention)==null?void 0:ie.replace("%",""))||"0"),avgCustomers:x-p>0?B/(x-p):0,lateCancellation:0})}),y=h.find(c=>c.key===r);return y?m.filter(c=>c[r]>0).sort((c,x)=>{const p=c[r],k=x[r];return y.higherIsBetter?k-p:p-k}):[]},[l,r,s]),n=m=>{switch(m){case 1:return e.jsx(xe,{className:"w-5 h-5 text-yellow-500"});case 2:return e.jsx(Le,{className:"w-5 h-5 text-gray-400"});case 3:return e.jsx(Me,{className:"w-5 h-5 text-amber-600"});default:return e.jsxs("span",{className:"w-5 h-5 flex items-center justify-center text-sm font-bold text-gray-500",children:["#",m]})}},a=(m,y)=>{switch(y){case"revenue":return`₹${d(m)}`;case"fillRate":case"conversion":case"retention":return`${m.toFixed(1)}%`;case"avgCustomers":return m.toFixed(1);default:return d(m)}},g=h.find(m=>m.key===r);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(f,{className:"bg-gradient-to-br from-white via-blue-50/30 to-purple-50/20 border-0 shadow-xl",children:[e.jsx(S,{children:e.jsxs(C,{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx(xe,{className:"w-6 h-6 text-yellow-500"}),"Trainer Rankings & Performance"]})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(U,{variant:s==="all"?"default":"outline",size:"sm",onClick:()=>i("all"),children:"All Formats"}),e.jsx(U,{variant:s==="powercycle"?"default":"outline",size:"sm",onClick:()=>i("powercycle"),className:"bg-blue-500 hover:bg-blue-600 text-white",children:"PowerCycle"}),e.jsx(U,{variant:s==="barre"?"default":"outline",size:"sm",onClick:()=>i("barre"),className:"bg-pink-500 hover:bg-pink-600 text-white",children:"Barre"}),e.jsx(U,{variant:s==="strength"?"default":"outline",size:"sm",onClick:()=>i("strength"),className:"bg-green-500 hover:bg-green-600 text-white",children:"Strength Lab"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:h.map(m=>e.jsxs(U,{variant:r===m.key?"default":"outline",size:"sm",onClick:()=>o(m.key),className:"flex items-center gap-2 text-xs",children:[e.jsx(m.icon,{className:"w-4 h-4"}),m.label]},m.key))})]})]}),e.jsxs(f,{className:"bg-white border border-gray-200 shadow-lg",children:[e.jsxs(S,{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:[e.jsxs(C,{className:"text-lg font-bold flex items-center gap-3",children:[(g==null?void 0:g.icon)&&e.jsx(g.icon,{className:"w-5 h-5"}),g==null?void 0:g.label," Rankings",e.jsx(P,{variant:"secondary",className:"ml-auto",children:s==="all"?"All Formats":s==="powercycle"?"PowerCycle":s==="barre"?"Barre":"Strength Lab"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:g==null?void 0:g.description})]}),e.jsx(v,{className:"p-0",children:e.jsx("div",{className:"space-y-1",children:t.slice(0,15).map((m,y)=>e.jsxs("div",{className:`flex items-center justify-between p-4 hover:bg-gray-50 cursor-pointer border-l-4 ${y===0?"border-yellow-400 bg-yellow-50/30":y===1?"border-gray-400 bg-gray-50/30":y===2?"border-amber-400 bg-amber-50/30":"border-transparent"}`,onClick:()=>j({type:"trainer",trainer:m,rank:y+1,metric:r,format:s}),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8",children:n(y+1)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:m.teacherName}),e.jsx("p",{className:"text-sm text-gray-600",children:m.location})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-lg",children:a(m[r],r)}),e.jsx("div",{className:"text-sm text-gray-500",children:m.totalSessions>0&&`${m.totalSessions} sessions`})]})]},m.unique))})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.slice(0,3).map((m,y)=>e.jsx(f,{className:`cursor-pointer hover:shadow-lg transition-all duration-300 ${y===0?"bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200":y===1?"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-200":"bg-gradient-to-br from-amber-50 to-amber-100 border-amber-200"}`,onClick:()=>j({type:"trainer",trainer:m,rank:y+1,metric:r,format:s}),children:e.jsxs(v,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n(y+1),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:m.teacherName}),e.jsx("p",{className:"text-sm text-gray-600",children:m.location})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:a(m[r],r)}),e.jsx("div",{className:"text-sm text-gray-600",children:g==null?void 0:g.label}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[m.totalSessions," sessions"]}),e.jsxs("span",{children:[m.totalCustomers," customers"]})]})]})]})},m.unique))})]})},as=({data:l,onItemClick:j})=>e.jsxs(f,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[e.jsx(S,{children:e.jsxs(C,{className:"text-lg font-bold flex items-center gap-3 text-blue-900",children:[e.jsx(L,{className:"w-5 h-5"}),"PowerCycle Detailed Analytics"]})}),e.jsx(v,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-blue-200",children:[e.jsx("th",{className:"text-left p-3 font-semibold text-blue-800",children:"Trainer"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Total Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Empty Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Fill Rate"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Customers"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Revenue"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Revenue/Session"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Avg Customers"})]})}),e.jsx("tbody",{children:l.map((r,o)=>{const s=r.cycleSessions||0,i=r.emptyCycleSessions||0,h=r.cycleCustomers||0,t=r.cyclePaid||0,n=s>0?(s-i)/s*100:0,a=s>0?t/s:0,g=s-i>0?h/(s-i):0;return e.jsxs("tr",{className:"border-b border-blue-100 hover:bg-blue-50 cursor-pointer",onClick:()=>j({type:"powercycle-trainer",trainer:r,metrics:{sessions:s,emptySessions:i,customers:h,revenue:t,fillRate:n,revenuePerSession:a,avgCustomers:g}}),children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-blue-900",children:r.teacherName}),e.jsx("div",{className:"text-sm text-blue-600",children:r.location})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:d(s)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(K,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-medium",children:d(i)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs(P,{variant:n>=80?"default":n>=60?"secondary":"destructive",className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-3 h-3"}),n.toFixed(1),"%"]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:d(h)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"font-medium",children:["₹",d(t)]})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("span",{className:"font-medium",children:["₹",d(a)]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("span",{className:"font-medium",children:g.toFixed(1)})})]},r.unique)})})]})})})]}),ls=({data:l,onItemClick:j})=>e.jsxs(f,{className:"bg-gradient-to-br from-pink-50 to-pink-100 border-pink-200",children:[e.jsx(S,{children:e.jsxs(C,{className:"text-lg font-bold flex items-center gap-3 text-pink-900",children:[e.jsx(T,{className:"w-5 h-5"}),"Barre Detailed Analytics"]})}),e.jsx(v,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-pink-200",children:[e.jsx("th",{className:"text-left p-3 font-semibold text-pink-800",children:"Trainer"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Total Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Empty Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Fill Rate"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Customers"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Revenue"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Revenue/Session"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Avg Customers"})]})}),e.jsx("tbody",{children:l.map((r,o)=>{const s=r.barreSessions||0,i=r.emptyBarreSessions||0,h=r.barreCustomers||0,t=r.barrePaid||0,n=s>0?(s-i)/s*100:0,a=s>0?t/s:0,g=s-i>0?h/(s-i):0;return e.jsxs("tr",{className:"border-b border-pink-100 hover:bg-pink-50 cursor-pointer",onClick:()=>j({type:"barre-trainer",trainer:r,metrics:{sessions:s,emptySessions:i,customers:h,revenue:t,fillRate:n,revenuePerSession:a,avgCustomers:g}}),children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-pink-900",children:r.teacherName}),e.jsx("div",{className:"text-sm text-pink-600",children:r.location})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-pink-500"}),e.jsx("span",{className:"font-medium",children:d(s)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(K,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-medium",children:d(i)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs(P,{variant:n>=80?"default":n>=60?"secondary":"destructive",className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-3 h-3"}),n.toFixed(1),"%"]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-pink-500"}),e.jsx("span",{className:"font-medium",children:d(h)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"font-medium",children:["₹",d(t)]})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("span",{className:"font-medium",children:["₹",d(a)]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("span",{className:"font-medium",children:g.toFixed(1)})})]},r.unique)})})]})})})]}),ns=({data:l,onItemClick:j})=>e.jsxs(f,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[e.jsx(S,{children:e.jsxs(C,{className:"text-lg font-bold flex items-center gap-3 text-green-900",children:[e.jsx(q,{className:"w-5 h-5"}),"Strength Lab Detailed Analytics"]})}),e.jsx(v,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-green-200",children:[e.jsx("th",{className:"text-left p-3 font-semibold text-green-800",children:"Trainer"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Total Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Empty Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Fill Rate"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Customers"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Revenue"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Revenue/Session"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Avg Customers"})]})}),e.jsx("tbody",{children:l.map((r,o)=>{const s=r.strengthSessions||0,i=r.emptyStrengthSessions||0,h=r.strengthCustomers||0,t=r.strengthPaid||0,n=s>0?(s-i)/s*100:0,a=s>0?t/s:0,g=s-i>0?h/(s-i):0;return e.jsxs("tr",{className:"border-b border-green-100 hover:bg-green-50 cursor-pointer",onClick:()=>j({type:"strength-trainer",trainer:r,metrics:{sessions:s,emptySessions:i,customers:h,revenue:t,fillRate:n,revenuePerSession:a,avgCustomers:g}}),children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-900",children:r.teacherName}),e.jsx("div",{className:"text-sm text-green-600",children:r.location})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"font-medium",children:d(s)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(K,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-medium",children:d(i)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs(P,{variant:n>=80?"default":n>=60?"secondary":"destructive",className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-3 h-3"}),n.toFixed(1),"%"]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"font-medium",children:d(h)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"font-medium",children:["₹",d(t)]})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("span",{className:"font-medium",children:["₹",d(a)]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("span",{className:"font-medium",children:g.toFixed(1)})})]},r.unique)})})]})})})]}),is=({data:l,onItemClick:j})=>{const[r,o]=R.useState("powercycle"),s=l.filter(t=>(t.cycleSessions||0)>0),i=l.filter(t=>(t.barreSessions||0)>0),h=l.filter(t=>(t.strengthSessions||0)>0);return e.jsx("div",{className:"space-y-6",children:e.jsxs(f,{className:"bg-gradient-to-br from-white via-blue-50/30 to-purple-50/20 border-0 shadow-xl",children:[e.jsx(S,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:e.jsxs(C,{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx(te,{className:"w-6 h-6"}),"Detailed Format Analytics"]})}),e.jsx(v,{className:"p-6",children:e.jsxs(fe,{value:r,onValueChange:o,className:"w-full",children:[e.jsxs(ve,{className:"grid w-full grid-cols-3 bg-gray-100 p-1 rounded-lg",children:[e.jsxs($,{value:"powercycle",className:"text-sm font-medium",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"PowerCycle"]}),e.jsxs($,{value:"barre",className:"text-sm font-medium",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Barre"]}),e.jsxs($,{value:"strength",className:"text-sm font-medium",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Strength Lab"]})]}),e.jsx(I,{value:"powercycle",className:"mt-6",children:e.jsx(as,{data:s,onItemClick:j})}),e.jsx(I,{value:"barre",className:"mt-6",children:e.jsx(ls,{data:i,onItemClick:j})}),e.jsx(I,{value:"strength",className:"mt-6",children:e.jsx(ns,{data:h,onItemClick:j})})]})})]})})},os=({data:l,onItemClick:j})=>{const r=R.useMemo(()=>{if(!l||l.length===0)return{byLocation:[],byTrainer:[],byMonth:[]};const s=l.reduce((t,n)=>{const a=n.location||"Unknown";return t[a]||(t[a]={location:a,totalSessions:0,totalCustomers:0,cycleSessions:0,barreSessions:0,strengthSessions:0,totalPaid:0}),t[a].totalSessions+=n.totalSessions||0,t[a].totalCustomers+=n.totalCustomers||0,t[a].cycleSessions+=n.cycleSessions||0,t[a].barreSessions+=n.barreSessions||0,t[a].strengthSessions+=n.strengthSessions||0,t[a].totalPaid+=n.totalPaid||0,t},{}),i=l.reduce((t,n)=>{const a=n.teacherName||"Unknown";return t[a]||(t[a]={trainer:a,totalSessions:0,totalCustomers:0,cycleSessions:0,barreSessions:0,strengthSessions:0,totalPaid:0}),t[a].totalSessions+=n.totalSessions||0,t[a].totalCustomers+=n.totalCustomers||0,t[a].cycleSessions+=n.cycleSessions||0,t[a].barreSessions+=n.barreSessions||0,t[a].strengthSessions+=n.strengthSessions||0,t[a].totalPaid+=n.totalPaid||0,t},{}),h=l.reduce((t,n)=>{const a=n.monthYear||"Unknown";return t[a]||(t[a]={month:a,totalSessions:0,totalCustomers:0,cycleSessions:0,barreSessions:0,strengthSessions:0,totalPaid:0}),t[a].totalSessions+=n.totalSessions||0,t[a].totalCustomers+=n.totalCustomers||0,t[a].cycleSessions+=n.cycleSessions||0,t[a].barreSessions+=n.barreSessions||0,t[a].strengthSessions+=n.strengthSessions||0,t[a].totalPaid+=n.totalPaid||0,t},{});return{byLocation:Object.values(s).sort((t,n)=>n.totalSessions-t.totalSessions),byTrainer:Object.values(i).sort((t,n)=>n.totalSessions-t.totalSessions),byMonth:Object.values(h).sort((t,n)=>t.month.localeCompare(n.month))}},[l]),o=(s,i,h,t)=>{const n=Math.max(...s.map(a=>a.totalSessions));return e.jsxs(f,{className:"h-full",children:[e.jsx(S,{children:e.jsxs(C,{className:"flex items-center gap-2 text-lg",children:[t,h]})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-4",children:s.slice(0,8).map((a,g)=>{const m=n>0?a.totalSessions/n*100:0,y=a.location||a.trainer||a.month;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 truncate flex-1 mr-2",children:y}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(P,{variant:"outline",className:"text-xs",children:[a.totalSessions," sessions"]}),e.jsxs(P,{variant:"secondary",className:"text-xs",children:[a.totalCustomers," customers"]})]})]}),e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-teal-500 h-2 rounded-full transition-all duration-500",style:{width:`${m}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[e.jsxs("span",{children:["Cycle: ",a.cycleSessions," | Barre: ",a.barreSessions]}),e.jsxs("span",{children:["₹",(a.totalPaid||0).toLocaleString()]})]})]},g)})})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Performance Analytics Charts"}),e.jsx("p",{className:"text-slate-600",children:"Visual breakdown of sessions, customers, and revenue across different dimensions"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[o(r.byLocation,"location","By Location",e.jsx(F,{className:"w-5 h-5 text-green-500"})),o(r.byTrainer,"trainer","By Trainer",e.jsx(A,{className:"w-5 h-5 text-blue-500"})),o(r.byMonth,"month","By Month",e.jsx(E,{className:"w-5 h-5 text-purple-500"}))]}),e.jsxs(f,{children:[e.jsx(S,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-cyan-500"}),"Overall Performance Summary"]})}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-cyan-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-600",children:l.reduce((s,i)=>s+(i.totalSessions||0),0)}),e.jsx("div",{className:"text-sm text-slate-600",children:"Total Sessions"})]}),e.jsxs("div",{className:"text-center p-4 bg-teal-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-teal-600",children:l.reduce((s,i)=>s+(i.totalCustomers||0),0)}),e.jsx("div",{className:"text-sm text-slate-600",children:"Total Customers"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.reduce((s,i)=>s+(i.cycleSessions||0),0)}),e.jsx("div",{className:"text-sm text-slate-600",children:"Cycle Sessions"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:l.reduce((s,i)=>s+(i.barreSessions||0),0)}),e.jsx("div",{className:"text-sm text-slate-600",children:"Barre Sessions"})]})]})})]})]})},cs=({data:l,onItemClick:j})=>{const r=R.useMemo(()=>{if(!l||l.length===0)return[];const s=[],i=l.reduce((b,w)=>b+(w.totalSessions||0),0),h=l.reduce((b,w)=>b+(w.cycleSessions||0),0),t=l.reduce((b,w)=>b+(w.barreSessions||0),0),n=l.reduce((b,w)=>b+(w.totalCustomers||0),0),a=l.reduce((b,w)=>b+(w.totalPaid||0),0),g=h/(t||1);g>1.5?s.push({type:"performance",icon:e.jsx(L,{className:"w-5 h-5 text-yellow-500"}),title:"PowerCycle Dominance",description:`PowerCycle sessions are ${(g*100-100).toFixed(0)}% higher than Barre sessions`,recommendation:"Consider expanding PowerCycle capacity or promoting Barre classes",priority:"medium"}):g<.7&&s.push({type:"performance",icon:e.jsx(F,{className:"w-5 h-5 text-purple-500"}),title:"Barre Leading Performance",description:`Barre sessions are ${(1/g*100-100).toFixed(0)}% higher than PowerCycle sessions`,recommendation:"Consider increasing PowerCycle marketing or class availability",priority:"medium"});const m=n/(i||1);m<8?s.push({type:"efficiency",icon:e.jsx(Ue,{className:"w-5 h-5 text-red-500"}),title:"Low Session Utilization",description:`Average ${m.toFixed(1)} customers per session`,recommendation:"Focus on improving class attendance and reducing empty sessions",priority:"high"}):m>12&&s.push({type:"efficiency",icon:e.jsx(ze,{className:"w-5 h-5 text-green-500"}),title:"Excellent Session Utilization",description:`Strong average of ${m.toFixed(1)} customers per session`,recommendation:"Maintain current strategies and consider expanding popular time slots",priority:"low"});const y=a/(n||1);y>1500&&s.push({type:"revenue",icon:e.jsx(E,{className:"w-5 h-5 text-green-500"}),title:"High Revenue Per Customer",description:`Excellent ₹${y.toFixed(0)} average revenue per customer`,recommendation:"Focus on customer retention to maintain this high value",priority:"low"});const c=l.reduce((b,w)=>{const u=w.location||"Unknown";return b[u]||(b[u]={sessions:0,customers:0,revenue:0}),b[u].sessions+=w.totalSessions||0,b[u].customers+=w.totalCustomers||0,b[u].revenue+=w.totalPaid||0,b},{}),x=Object.entries(c);if(x.length>1){const b=x.reduce((u,N)=>N[1].sessions>u[1].sessions?N:u),w=b[1].sessions/i*100;w>60&&s.push({type:"location",icon:e.jsx(F,{className:"w-5 h-5 text-blue-500"}),title:"Location Concentration",description:`${b[0]} dominates with ${w.toFixed(0)}% of sessions`,recommendation:"Consider strategies to boost performance at other locations",priority:"medium"})}const p=l.reduce((b,w)=>{const u=w.teacherName||"Unknown";return b[u]||(b[u]={sessions:0,customers:0}),b[u].sessions+=w.totalSessions||0,b[u].customers+=w.totalCustomers||0,b},{}),k=Object.entries(p),B=k.reduce((b,w)=>w[1].sessions>b[1].sessions?w:b);if(B&&k.length>1){const b=B[1].sessions/i*100;s.push({type:"trainer",icon:e.jsx(A,{className:"w-5 h-5 text-purple-500"}),title:"Top Performing Trainer",description:`${B[0]} leads with ${b.toFixed(0)}% of total sessions`,recommendation:"Learn from their best practices and share with other trainers",priority:"low"})}return s},[l]),o=s=>{switch(s){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Strategic Insights & Recommendations"}),e.jsx("p",{className:"text-slate-600",children:"Data-driven insights to optimize your PowerCycle vs Barre performance"})]}),r.length===0?e.jsx(f,{children:e.jsxs(v,{className:"text-center py-12",children:[e.jsx(re,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"No Insights Available"}),e.jsx("p",{className:"text-slate-500",children:"Add more data to generate meaningful insights"})]})}):e.jsx("div",{className:"grid gap-6",children:r.map((s,i)=>e.jsxs(f,{className:"hover:shadow-lg transition-shadow duration-300",children:[e.jsx(S,{children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.icon,e.jsxs("div",{children:[e.jsx(C,{className:"text-lg",children:s.title}),e.jsxs(P,{className:`mt-2 ${o(s.priority)}`,children:[s.priority.toUpperCase()," PRIORITY"]})]})]})})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-slate-700",children:s.description}),e.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border-l-4 border-cyan-500",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-cyan-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-slate-700 font-medium",children:s.recommendation})]})})]})})]},i))}),e.jsxs(f,{children:[e.jsx(S,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5 text-cyan-500"}),"Key Performance Indicators"]})}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-cyan-50 to-teal-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-600",children:l.length>0?(l.reduce((s,i)=>s+(i.totalCustomers||0),0)/l.reduce((s,i)=>s+(i.totalSessions||0),1)||0).toFixed(1):"0"}),e.jsx("div",{className:"text-sm text-slate-600",children:"Avg Customers/Session"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:l.length>0?(l.reduce((s,i)=>s+(i.cycleSessions||0),0)/(l.reduce((s,i)=>s+(i.barreSessions||0),1)||1)||0).toFixed(1):"0"}),e.jsx("div",{className:"text-sm text-slate-600",children:"Cycle/Barre Ratio"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["₹",l.length>0?(l.reduce((s,i)=>s+(i.totalPaid||0),0)/(l.reduce((s,i)=>s+(i.totalCustomers||0),1)||1)||0).toFixed(0):"0"]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Revenue/Customer"})]})]})})]})]})},ds=({isOpen:l,onClose:j,data:r,allData:o})=>{var n;if(!r)return null;const s=()=>{const a=r.trainer;if(!a)return null;const g=a.totalSessions||0,m=a.totalEmptySessions||0,y=a.totalCustomers||0,c=a.totalPaid||0,x=g>0?(g-m)/g*100:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(f,{className:"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200",children:[e.jsxs(S,{children:[e.jsxs(C,{className:"flex items-center gap-3",children:[e.jsx(A,{className:"w-5 h-5 text-blue-600"}),a.teacherName]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.location," • ",a.monthYear]})]}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d(g)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Sessions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["₹",d(c)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Revenue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:d(y)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Customers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[x.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Fill Rate"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(f,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[e.jsx(S,{className:"pb-3",children:e.jsxs(C,{className:"text-sm flex items-center gap-2 text-blue-800",children:[e.jsx(L,{className:"w-4 h-4"}),"PowerCycle"]})}),e.jsxs(v,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-blue-600",children:"Sessions:"}),e.jsx("span",{className:"text-sm font-medium",children:d(a.cycleSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-blue-600",children:"Empty:"}),e.jsx("span",{className:"text-sm font-medium",children:d(a.emptyCycleSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-blue-600",children:"Customers:"}),e.jsx("span",{className:"text-sm font-medium",children:d(a.cycleCustomers||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-blue-600",children:"Revenue:"}),e.jsxs("span",{className:"text-sm font-medium",children:["₹",d(a.cyclePaid||0)]})]})]})]}),e.jsxs(f,{className:"bg-gradient-to-br from-pink-50 to-pink-100 border-pink-200",children:[e.jsx(S,{className:"pb-3",children:e.jsxs(C,{className:"text-sm flex items-center gap-2 text-pink-800",children:[e.jsx(T,{className:"w-4 h-4"}),"Barre"]})}),e.jsxs(v,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-pink-600",children:"Sessions:"}),e.jsx("span",{className:"text-sm font-medium",children:d(a.barreSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-pink-600",children:"Empty:"}),e.jsx("span",{className:"text-sm font-medium",children:d(a.emptyBarreSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-pink-600",children:"Customers:"}),e.jsx("span",{className:"text-sm font-medium",children:d(a.barreCustomers||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-pink-600",children:"Revenue:"}),e.jsxs("span",{className:"text-sm font-medium",children:["₹",d(a.barrePaid||0)]})]})]})]}),e.jsxs(f,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[e.jsx(S,{className:"pb-3",children:e.jsxs(C,{className:"text-sm flex items-center gap-2 text-green-800",children:[e.jsx(q,{className:"w-4 h-4"}),"Strength Lab"]})}),e.jsxs(v,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-green-600",children:"Sessions:"}),e.jsx("span",{className:"text-sm font-medium",children:d(a.strengthSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-green-600",children:"Empty:"}),e.jsx("span",{className:"text-sm font-medium",children:d(a.emptyStrengthSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-green-600",children:"Customers:"}),e.jsx("span",{className:"text-sm font-medium",children:d(a.strengthCustomers||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-green-600",children:"Revenue:"}),e.jsxs("span",{className:"text-sm font-medium",children:["₹",d(a.strengthPaid||0)]})]})]})]})]}),e.jsxs(f,{className:"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-200",children:[e.jsx(S,{children:e.jsxs(C,{className:"text-sm flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-gray-600"}),"Performance Metrics"]})}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:d(a.new||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"New Members"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:d(a.converted||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Converted"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-purple-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:d(a.retained||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Retained"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4 text-orange-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:a.conversion||"0%"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Conversion Rate"})]})]})]})})]})]})},i=()=>e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Metric Analysis"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Detailed breakdown of ",r.metric]})]})}),h=()=>e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Format Analysis"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Detailed breakdown of ",r.format]})]})}),t=()=>{var a,g;return(a=r.type)!=null&&a.includes("trainer")?`${((g=r.trainer)==null?void 0:g.teacherName)||"Trainer"} - Detailed Analysis`:r.type==="metric"?`${r.metric} - Metric Analysis`:r.type==="format"?`${r.format} - Format Analysis`:"Detailed Analysis"};return e.jsx(He,{open:l,onOpenChange:j,children:e.jsxs(We,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ge,{children:e.jsxs(Xe,{className:"flex items-center justify-between",children:[t(),e.jsx("button",{onClick:j,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(ye,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"mt-4",children:[((n=r.type)==null?void 0:n.includes("trainer"))&&s(),r.type==="metric"&&i(),r.type==="format"&&h()]})]})})},ms=({data:l})=>{const[j,r]=R.useState("dashboard"),[o,s]=R.useState("all"),[i,h]=R.useState("all"),[t,n]=R.useState("all"),[a,g]=R.useState(null),[m,y]=R.useState(!1),c=Ze("powercycle"),x=R.useMemo(()=>{if(!l)return[];let k=[...l];return o!=="all"&&(k=k.filter(B=>B.location===o)),t!=="all"&&(k=k.filter(B=>B.teacherName===t)),i!=="all"&&(k=k.filter(B=>B.monthYear===i)),k},[l,o,i,t]),p=k=>{g(k)};return!l||l.length===0?e.jsx(f,{className:"bg-yellow-50 border-yellow-200",children:e.jsx(v,{className:"p-6",children:e.jsx("p",{className:"text-yellow-600",children:"No PowerCycle vs Barre vs Strength Lab data available"})})}):e.jsxs("div",{className:"space-y-8 p-6 bg-gradient-to-br from-cyan-50/50 via-white to-teal-50/30 min-h-screen",children:[e.jsx("div",{className:"relative overflow-hidden",children:e.jsx(f,{className:`bg-gradient-to-r ${c.heroGradient} border-0 shadow-2xl backdrop-blur-sm`,children:e.jsxs(S,{className:"relative pb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10 backdrop-blur-sm"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:e.jsx(L,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx(C,{className:"text-3xl font-bold text-white mb-2",children:"PowerCycle vs Barre vs Strength Analytics"}),e.jsx("p",{className:"text-white/80 text-lg",children:"Comprehensive performance analysis across all class formats"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(U,{variant:"ghost",size:"sm",onClick:()=>y(!m),className:"bg-white/20 text-white border-white/30 hover:bg-white/30 backdrop-blur-sm",children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),m?"Hide":"Show"," Filters"]}),e.jsxs(P,{className:"bg-white/20 text-white border-white/30 px-3 py-1",children:[e.jsx(Ve,{className:"w-4 h-4 mr-1"}),"Live Data"]})]})]})})]})})}),m&&e.jsx("div",{className:"transform transition-all duration-300 ease-in-out",children:e.jsx(ss,{data:l,selectedLocation:o,onLocationChange:s,selectedPeriod:i,onPeriodChange:h,selectedTrainer:t,onTrainerChange:n})}),e.jsx(ts,{data:x,onItemClick:p}),e.jsxs(fe,{value:j,onValueChange:r,className:"w-full",children:[e.jsxs(f,{className:"bg-gradient-to-br from-white via-cyan-50/30 to-teal-50/20 border-0 shadow-xl backdrop-blur-sm",children:[e.jsxs(S,{className:`bg-gradient-to-r ${c.heroGradient} text-white relative overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/10 to-transparent"}),e.jsxs(C,{className:"text-xl font-bold flex items-center gap-3 relative z-10",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:e.jsx(te,{className:"w-5 h-5 text-white"})}),"Advanced Analytics Dashboard",e.jsxs(P,{className:"ml-auto bg-white/20 text-white border-white/30",children:[x.length," Records"]})]})]}),e.jsx(v,{className:"p-6 bg-gradient-to-br from-white to-cyan-50/20",children:e.jsxs(ve,{className:"grid w-full grid-cols-6 bg-gradient-to-r from-cyan-100/80 to-teal-100/80 p-2 rounded-xl shadow-inner backdrop-blur-sm border border-cyan-200/30",children:[e.jsxs($,{value:"dashboard",className:`text-sm font-medium transition-all duration-200 rounded-lg ${V("powercycle")}`,children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),e.jsxs($,{value:"comparison",className:`text-sm font-medium transition-all duration-200 rounded-lg ${V("powercycle")}`,children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Comparison"]}),e.jsxs($,{value:"rankings",className:`text-sm font-medium transition-all duration-200 rounded-lg ${V("powercycle")}`,children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Rankings"]}),e.jsxs($,{value:"analytics",className:`text-sm font-medium transition-all duration-200 rounded-lg ${V("powercycle")}`,children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Analytics"]}),e.jsxs($,{value:"charts",className:`text-sm font-medium transition-all duration-200 rounded-lg ${V("powercycle")}`,children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Charts"]}),e.jsxs($,{value:"insights",className:`text-sm font-medium transition-all duration-200 rounded-lg ${V("powercycle")}`,children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Insights"]})]})})]}),e.jsx(I,{value:"dashboard",className:"space-y-8 mt-6",children:e.jsx("div",{className:"bg-gradient-to-br from-white to-cyan-50/30 rounded-xl p-6 shadow-lg backdrop-blur-sm border border-cyan-200/30",children:e.jsx(be,{data:x,onItemClick:p})})}),e.jsx(I,{value:"comparison",className:"space-y-8 mt-6",children:e.jsx("div",{className:"bg-gradient-to-br from-white to-cyan-50/30 rounded-xl p-6 shadow-lg backdrop-blur-sm border border-cyan-200/30",children:e.jsx(be,{data:x,onItemClick:p,showDetailed:!0})})}),e.jsx(I,{value:"rankings",className:"space-y-8 mt-6",children:e.jsx("div",{className:"bg-gradient-to-br from-white to-cyan-50/30 rounded-xl p-6 shadow-lg backdrop-blur-sm border border-cyan-200/30",children:e.jsx(rs,{data:x,onItemClick:p})})}),e.jsx(I,{value:"analytics",className:"space-y-8 mt-6",children:e.jsx("div",{className:"bg-gradient-to-br from-white to-cyan-50/30 rounded-xl p-6 shadow-lg backdrop-blur-sm border border-cyan-200/30",children:e.jsx(is,{data:x,onItemClick:p})})}),e.jsx(I,{value:"charts",className:"space-y-8 mt-6",children:e.jsx("div",{className:"bg-gradient-to-br from-white to-cyan-50/30 rounded-xl p-6 shadow-lg backdrop-blur-sm border border-cyan-200/30",children:e.jsx(os,{data:x,onItemClick:p})})}),e.jsx(I,{value:"insights",className:"space-y-8 mt-6",children:e.jsx("div",{className:"bg-gradient-to-br from-white to-cyan-50/30 rounded-xl p-6 shadow-lg backdrop-blur-sm border border-cyan-200/30",children:e.jsx(cs,{data:x,onItemClick:p})})})]}),a&&e.jsx(ds,{isOpen:!!a,onClose:()=>g(null),data:a,allData:x})]})},bs=({data:l})=>e.jsx(ms,{data:l||[]});export{ps as P,bs as a};
