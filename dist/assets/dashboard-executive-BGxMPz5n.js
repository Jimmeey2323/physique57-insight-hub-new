var Re=Object.defineProperty,Fe=Object.defineProperties;var Ve=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var fe=(l,g,c)=>g in l?Re(l,g,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[g]=c,L=(l,g)=>{for(var c in g||(g={}))Be.call(g,c)&&fe(l,c,g[c]);if(ve)for(var c of ve(g))Ee.call(g,c)&&fe(l,c,g[c]);return l},E=(l,g)=>Fe(l,Ve(g));import{r as v,j as e,i as K,U as I,T as Z,g as $,O as we,_ as Ne,P as ce,f as ye,Z as de,h as F,w as W,e as je,u as Ce,R as te,v as Ie,V as Oe,W as Ue,F as Ge,X as Ke,C as $e,b as ze,c as xe,M as he,a4 as Ye,a5 as Xe,z as qe,E as He}from"./react-vendor-BrAkf1Ej.js";import{C as b,c as w,B as y,d as z,j as C,k as A,a as We,b as Ze,e as _e,W as Je,r as Qe,s as es,t as q,u as H,X as ss}from"./ui-components-_bEsYxhv.js";import{g as ue,f as P,c as G,i as ge,j as ts,k as as,u as ns,e as ls,l as rs,m as is,n as os}from"./utils-hni-AijI.js";import{m as cs}from"./animation-vendor-Cz-8KeDB.js";import{R as ae,A as ds,C as ne,X as le,Y as re,T as ie,a as oe,f as xs,b as ms,B as pe,c as U}from"./chart-vendor-CfJT7qML.js";import{E as hs}from"./dashboard-discounts-CmxlrDWw.js";import{P as us}from"./dashboard-formats-Bew8YI_U.js";const Ae=v.createContext(void 0),Te=()=>{const l=v.useContext(Ae);if(!l)throw new Error("useGlobalFilters must be used within a GlobalFiltersProvider");return l},Ss=({children:l})=>{const[g,c]=v.useState(()=>({dateRange:ue(),location:[],category:[],product:[],soldBy:[],paymentMethod:[],source:[],associate:[],stage:[],status:[],channel:[],trialStatus:[],conversionStatus:[],retentionStatus:[],minLTV:void 0,maxLTV:void 0})),h=a=>{c(n=>L(L({},n),a))},f=()=>{const a=ue();c({dateRange:a,location:[],category:[],product:[],soldBy:[],paymentMethod:[],source:[],associate:[],stage:[],status:[],channel:[],trialStatus:[],conversionStatus:[],retentionStatus:[],minLTV:void 0,maxLTV:void 0})},d=()=>{const a=ue();h({dateRange:a})};return e.jsx(Ae.Provider,{value:{filters:g,updateFilters:h,clearFilters:f,resetToDefaultDates:d},children:l})},gs=({data:l})=>{const g=v.useMemo(()=>{var p,j,se,M;const c=l.sales.reduce((m,T)=>m+(T.paymentValue||0),0),h=l.sales.reduce((m,T)=>m+(T.paymentVAT||0),0),f=c-h,d=l.sales.length,a=new Set(l.sales.map(m=>m.memberId)).size,n=l.sessions.length,s=l.sessions.reduce((m,T)=>m+(T.checkedInCount||0),0),t=l.sessions.reduce((m,T)=>m+(T.capacity||0),0),i=l.newClients.filter(m=>{var B;return(((B=m.isNew)==null?void 0:B.toString().toLowerCase())||"").includes("new")}).length,r=d>0?c/d:0,o=t>0?s/t*100:0;l.sessions.filter(m=>(m.checkedInCount||0)===0).length;const u=l.sessions.filter(m=>{var T,B;return((T=m.cleanedClass)==null?void 0:T.toLowerCase().includes("cycle"))||((B=m.classType)==null?void 0:B.toLowerCase().includes("cycle"))}).length,S=l.leads.length,k=l.leads.filter(m=>m.conversionStatus==="Converted").length,_=S>0?k/S*100:0,O=l.newClients.filter(m=>m.retentionStatus==="Retained").length,J=i>0?O/i*100:0,V=n>0?s/n:0,me=((p=l.sales)==null?void 0:p.reduce((m,T)=>m+(T.discountAmount||0),0))||0,Y=((j=l.sales)==null?void 0:j.filter(m=>(m.discountAmount||0)>0).length)||0,Q=((se=l.discounts)==null?void 0:se.reduce((m,T)=>m+(T.discountAmount||0),0))||0,x=((M=l.discounts)==null?void 0:M.length)||0,D=Q>0?Q:me,ee=x>0?x:Y;return[{title:"Total Revenue",value:P(c),change:"+12.5%",changeType:"positive",icon:K,color:"from-green-500 to-emerald-600",description:"Total sales revenue from all transactions",rawValue:c},{title:"Net Revenue",value:P(f),change:"+10.2%",changeType:"positive",icon:K,color:"from-emerald-500 to-green-600",description:"Revenue after VAT deduction",rawValue:f},{title:"Active Members",value:G(a),change:"+8.2%",changeType:"positive",icon:I,color:"from-blue-500 to-cyan-600",description:"Unique paying members",rawValue:a},{title:"Lead Conversion",value:`${_.toFixed(1)}%`,change:"+3.1%",changeType:"positive",icon:Z,color:"from-purple-500 to-violet-600",description:"Lead to member conversion",rawValue:_},{title:"Session Attendance",value:G(s),change:"+15.3%",changeType:"positive",icon:$,color:"from-orange-500 to-red-600",description:"Total sessions attended",rawValue:s},{title:"New Clients",value:G(i),change:"+7.8%",changeType:"positive",icon:we,color:"from-teal-500 to-cyan-600",description:"New member acquisitions",rawValue:i},{title:"Avg. Transaction",value:P(r),change:"+4.2%",changeType:"positive",icon:Ne,color:"from-indigo-500 to-blue-600",description:"Average transaction value from sales",rawValue:r},{title:"Retention Rate",value:`${J.toFixed(1)}%`,change:"+2.1%",changeType:"positive",icon:ce,color:"from-emerald-500 to-green-600",description:"Client retention rate",rawValue:J},{title:"Class Utilization",value:`${o.toFixed(1)}%`,change:o<70?"-1.2%":"+2.3%",changeType:o<70?"negative":"positive",icon:ye,color:"from-yellow-500 to-orange-600",description:"Average class capacity filled",rawValue:o},{title:"Total VAT",value:P(h),change:"+9.5%",changeType:"positive",icon:K,color:"from-red-500 to-pink-600",description:"Total VAT collected from sales",rawValue:h},{title:"PowerCycle Classes",value:G(u),change:"+9.4%",changeType:"positive",icon:de,color:"from-violet-500 to-purple-600",description:"PowerCycle sessions held",rawValue:u},{title:"Avg. Session Size",value:V.toFixed(1),change:"+11.2%",changeType:"positive",icon:I,color:"from-lime-500 to-green-600",description:"Average attendees per session",rawValue:V},{title:"Discount Amount",value:P(D),change:"+5.8%",changeType:"positive",icon:ce,color:"from-pink-500 to-rose-600",description:"Total discount amount given",rawValue:D},{title:"Discount Transactions",value:G(ee),change:"+3.7%",changeType:"positive",icon:Ne,color:"from-amber-500 to-orange-600",description:"Transactions with discounts",rawValue:ee}]},[l]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Key Performance Metrics"}),e.jsx("p",{className:"text-slate-600",children:"Real-time insights from previous month's data"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:g.map((c,h)=>e.jsx(cs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:h*.05},children:e.jsx(b,{className:"bg-white/80 backdrop-blur-sm shadow-xl border-0 overflow-hidden hover:shadow-2xl transition-all duration-300 hover:scale-105 h-full",children:e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${c.color} rounded-xl flex items-center justify-center shadow-lg`,children:e.jsx(c.icon,{className:"w-6 h-6 text-white"})}),e.jsxs(y,{className:`${c.changeType==="positive"?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-100 text-red-700 hover:bg-red-200"} transition-colors font-semibold`,children:[c.changeType==="positive"?e.jsx(F,{className:"w-3 h-3 mr-1"}):e.jsx(W,{className:"w-3 h-3 mr-1"}),c.change]})]}),e.jsx("h3",{className:"text-sm font-medium text-slate-600 mb-2",children:c.title}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:c.value}),e.jsx("p",{className:"text-xs text-slate-500",children:c.description})]})})},c.title))}),e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs(z,{onClick:()=>window.location.href="/",className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-full text-lg font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",children:[e.jsx(je,{className:"w-5 h-5 mr-2"}),"View Detailed Dashboard"]})})]})},be=({data:l,showTrends:g=!1})=>{const c=v.useMemo(()=>{const d=l.sales.reduce((a,n)=>{const s=new Date(n.paymentDate).toLocaleDateString();return a[s]||(a[s]={date:s,revenue:0,transactions:0}),a[s].revenue+=n.paymentValue||0,a[s].transactions+=1,a},{});return Object.values(d).slice(0,7)},[l.sales]),h=v.useMemo(()=>{const d=l.leads.reduce((a,n)=>{const s=n.source||"Unknown";return a[s]||(a[s]={source:s,leads:0,conversions:0,rate:0}),a[s].leads+=1,n.conversionStatus==="Converted"&&(a[s].conversions+=1),a},{});return Object.values(d).map(a=>E(L({},a),{rate:a.leads>0?a.conversions/a.leads*100:0}))},[l.leads]),f=v.useMemo(()=>{const d=l.sessions.reduce((n,s)=>{const t=s.cleanedClass||"Unknown";return n[t]=(n[t]||0)+1,n},{}),a=["#8B5CF6","#06B6D4","#10B981","#F59E0B","#EF4444"];return Object.entries(d).map(([n,s],t)=>({name:n,value:s,color:a[t%a.length]}))},[l.sessions]);return v.useMemo(()=>l.payroll.sort((d,a)=>(a.totalPaid||0)-(d.totalPaid||0)).slice(0,5).map(d=>({trainer:d.teacherName||"Unknown",revenue:d.totalPaid||0,sessions:d.totalSessions||0,customers:d.totalCustomers||0})),[l.payroll]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:g?"Performance Trends":"Business Analytics Charts"}),e.jsx("p",{className:"text-slate-600",children:"Visual insights from previous month's real data"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(b,{className:"bg-white shadow-xl border-0",children:[e.jsx(C,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),"Daily Revenue Trend",e.jsx(y,{className:"bg-white/20 text-white",children:"Last 7 Days"})]})}),e.jsx(w,{className:"p-6",children:e.jsx(ae,{width:"100%",height:300,children:e.jsxs(ds,{data:c,children:[e.jsx(ne,{strokeDasharray:"3 3"}),e.jsx(le,{dataKey:"date"}),e.jsx(re,{}),e.jsx(ie,{formatter:d=>P(d)}),e.jsx(oe,{}),e.jsx(xs,{type:"monotone",dataKey:"revenue",stackId:"1",stroke:"#8B5CF6",fill:"#8B5CF6",fillOpacity:.6,name:"Revenue ($)"}),e.jsx(ms,{type:"monotone",dataKey:"transactions",stroke:"#06B6D4",strokeWidth:3,name:"Transactions"})]})})})]}),e.jsxs(b,{className:"bg-white shadow-xl border-0",children:[e.jsx(C,{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white",children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Lead Conversion by Source",e.jsxs(y,{className:"bg-white/20 text-white",children:[l.leads.length," leads"]})]})}),e.jsx(w,{className:"p-6",children:e.jsx(ae,{width:"100%",height:300,children:e.jsxs(pe,{data:h,children:[e.jsx(ne,{strokeDasharray:"3 3"}),e.jsx(le,{dataKey:"source"}),e.jsx(re,{}),e.jsx(ie,{}),e.jsx(oe,{}),e.jsx(U,{dataKey:"leads",fill:"#94A3B8",name:"Total Leads"}),e.jsx(U,{dataKey:"conversions",fill:"#10B981",name:"Conversions"})]})})})]}),e.jsxs(b,{className:"bg-white shadow-xl border-0",children:[e.jsx(C,{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white",children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5"}),"Class Type Performance",e.jsxs(y,{className:"bg-white/20 text-white",children:[l.sessions.length," sessions"]})]})}),e.jsx(w,{className:"p-6",children:e.jsx(ae,{width:"100%",height:300,children:e.jsxs(pe,{data:f.slice(0,6),children:[e.jsx(ne,{strokeDasharray:"3 3"}),e.jsx(le,{dataKey:"name",angle:-45,textAnchor:"end",height:100,fontSize:12}),e.jsx(re,{}),e.jsx(ie,{}),e.jsx(oe,{}),e.jsx(U,{dataKey:"value",fill:"#8B5CF6",name:"Sessions"})]})})})]}),e.jsxs(b,{className:"bg-white shadow-xl border-0",children:[e.jsx(C,{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white",children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"Funnel Performance",e.jsx(y,{className:"bg-white/20 text-white",children:"Leads to Conversion"})]})}),e.jsx(w,{className:"p-6",children:e.jsx(ae,{width:"100%",height:300,children:e.jsxs(pe,{data:h.slice(0,5),children:[e.jsx(ne,{strokeDasharray:"3 3"}),e.jsx(le,{dataKey:"source"}),e.jsx(re,{}),e.jsx(ie,{formatter:(d,a)=>a==="rate"?`${d.toFixed(1)}%`:d}),e.jsx(oe,{}),e.jsx(U,{dataKey:"leads",fill:"#94A3B8",name:"Total Leads"}),e.jsx(U,{dataKey:"conversions",fill:"#10B981",name:"Conversions"}),e.jsx(U,{dataKey:"rate",fill:"#F59E0B",name:"Conversion Rate %"})]})})})]})]})]})},ps=({data:l,selectedLocation:g})=>{const c=v.useMemo(()=>{const s=l.sales.reduce((t,i)=>{const r=i.cleanedProduct||"Unknown Product",o=i.cleanedCategory||"Uncategorized";return t[r]||(t[r]={product:r,category:o,revenue:0,transactions:0,avgValue:0}),t[r].revenue+=i.paymentValue||0,t[r].transactions+=1,t[r].avgValue=t[r].revenue/t[r].transactions,t},{});return Object.values(s).sort((t,i)=>i.revenue-t.revenue).slice(0,10)},[l.sales]),h=v.useMemo(()=>{const s=l.leads.reduce((t,i)=>{const r=i.source||"Unknown Source";return t[r]||(t[r]={source:r,total:0,converted:0,conversionRate:0}),t[r].total+=1,i.conversionStatus==="Converted"&&(t[r].converted+=1),t[r].conversionRate=t[r].total>0?t[r].converted/t[r].total*100:0,t},{});return Object.values(s).sort((t,i)=>i.total-t.total).slice(0,8)},[l.leads]),f=v.useMemo(()=>{const s=l.newClients.reduce((t,i)=>{const r=i.firstClassType||"Unknown Class";return t[r]||(t[r]={className:r,newClients:0,retained:0,retentionRate:0}),t[r].newClients+=1,i.retentionStatus==="Retained"&&(t[r].retained+=1),t[r].retentionRate=t[r].newClients>0?t[r].retained/t[r].newClients*100:0,t},{});return Object.values(s).sort((t,i)=>i.newClients-t.newClients).slice(0,8)},[l.newClients]),d=v.useMemo(()=>{const s=l.sessions.reduce((i,r)=>{const o=r.cleanedClass||"Unknown Class";return i[o]||(i[o]={className:o,sessions:0,totalAttendance:0,totalCapacity:0,fillRate:0,avgAttendance:0}),i[o].sessions+=1,i[o].totalAttendance+=r.checkedInCount||0,i[o].totalCapacity+=r.capacity||0,i[o].avgAttendance=i[o].totalAttendance/i[o].sessions,i[o].fillRate=i[o].totalCapacity>0?i[o].totalAttendance/i[o].totalCapacity*100:0,i},{}),t=Object.values(s).sort((i,r)=>r.fillRate-i.fillRate);return{top:t.slice(0,5),bottom:t.slice(-5).reverse()}},[l.sessions]),a=v.useMemo(()=>{const s=l.sessions.reduce((i,r)=>{const o=r.trainerName||"Unknown Trainer";return i[o]||(i[o]={trainer:o,sessions:0,totalAttendance:0,avgAttendance:0,fillRate:0}),i[o].sessions+=1,i[o].totalAttendance+=r.checkedInCount||0,i[o].avgAttendance=i[o].totalAttendance/i[o].sessions,i},{}),t=Object.values(s).sort((i,r)=>r.avgAttendance-i.avgAttendance);return{top:t.slice(0,5),bottom:t.slice(-5).reverse()}},[l.sessions]),n=v.useMemo(()=>{const s=l.sessions.filter(o=>{var u,S;return((u=o.cleanedClass)==null?void 0:u.toLowerCase().includes("cycle"))||((S=o.classType)==null?void 0:S.toLowerCase().includes("cycle"))}),t=l.sessions.filter(o=>{var u;return(u=o.cleanedClass)==null?void 0:u.toLowerCase().includes("barre")}),i={sessions:s.length,attendance:s.reduce((o,u)=>o+(u.checkedInCount||0),0),avgAttendance:s.length>0?s.reduce((o,u)=>o+(u.checkedInCount||0),0)/s.length:0},r={sessions:t.length,attendance:t.reduce((o,u)=>o+(u.checkedInCount||0),0),avgAttendance:t.length>0?t.reduce((o,u)=>o+(u.checkedInCount||0),0)/t.length:0};return{powerCycle:i,barre:r}},[l.sessions]);return!l||Object.values(l).every(s=>s.length===0)?e.jsxs("div",{className:"text-center text-gray-600 p-8",children:[e.jsx($,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"No data available for the selected location and time period."})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(b,{className:"bg-gradient-to-br from-white via-blue-50/30 to-white border-0 shadow-lg",children:[e.jsx(C,{className:"pb-4",children:e.jsxs(A,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-blue-600"}),"Top Products by Revenue",e.jsxs(y,{variant:"secondary",children:[c.length," items"]})]})}),e.jsx(w,{children:e.jsx("div",{className:"space-y-3",children:c.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/80 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:["#",t+1]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 text-sm",children:s.product}),e.jsx("p",{className:"text-xs text-slate-500",children:s.category})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-slate-900",children:P(s.revenue)}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.transactions," sales"]})]})]},s.product))})})]}),e.jsxs(b,{className:"bg-gradient-to-br from-white via-green-50/30 to-white border-0 shadow-lg",children:[e.jsx(C,{className:"pb-4",children:e.jsxs(A,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-green-600"}),"Lead Sources & Conversion",e.jsxs(y,{variant:"secondary",children:[h.length," sources"]})]})}),e.jsx(w,{children:e.jsx("div",{className:"space-y-3",children:h.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/80 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-bold text-green-600",children:["#",t+1]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 text-sm",children:s.source}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.total," leads"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-slate-900",children:[s.conversionRate.toFixed(1),"%"]}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.converted," converted"]})]})]},s.source))})})]}),e.jsxs(b,{className:"bg-gradient-to-br from-white via-purple-50/30 to-white border-0 shadow-lg",children:[e.jsx(C,{className:"pb-4",children:e.jsxs(A,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5 text-purple-600"}),"New Clients by Class Type",e.jsxs(y,{variant:"secondary",children:[f.length," classes"]})]})}),e.jsx(w,{children:e.jsx("div",{className:"space-y-3",children:f.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/80 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-bold text-purple-600",children:["#",t+1]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 text-sm",children:s.className}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.newClients," new clients"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-slate-900",children:[s.retentionRate.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"retention"})]})]},s.className))})})]}),e.jsxs(b,{className:"bg-gradient-to-br from-white via-orange-50/30 to-white border-0 shadow-lg",children:[e.jsx(C,{className:"pb-4",children:e.jsxs(A,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5 text-orange-600"}),"Class Performance Rankings"]})}),e.jsx(w,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-green-700 mb-2 flex items-center gap-1",children:[e.jsx(F,{className:"w-4 h-4"}),"Top Performing"]}),e.jsx("div",{className:"space-y-2",children:d.top.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium",children:s.className})]}),e.jsxs("span",{className:"text-sm font-bold text-green-700",children:[s.fillRate.toFixed(1),"%"]})]},s.className))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-red-700 mb-2 flex items-center gap-1",children:[e.jsx(W,{className:"w-4 h-4"}),"Needs Improvement"]}),e.jsx("div",{className:"space-y-2",children:d.bottom.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-red-50/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium",children:s.className})]}),e.jsxs("span",{className:"text-sm font-bold text-red-700",children:[s.fillRate.toFixed(1),"%"]})]},s.className))})]})]})})]}),e.jsxs(b,{className:"bg-gradient-to-br from-white via-indigo-50/30 to-white border-0 shadow-lg lg:col-span-2",children:[e.jsx(C,{className:"pb-4",children:e.jsxs(A,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5 text-indigo-600"}),"PowerCycle vs Barre Performance"]})}),e.jsx(w,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(de,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-800",children:"PowerCycle"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:n.powerCycle.sessions}),e.jsx("p",{className:"text-xs text-blue-600",children:"Sessions"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:n.powerCycle.attendance}),e.jsx("p",{className:"text-xs text-blue-600",children:"Total Attendance"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:n.powerCycle.avgAttendance.toFixed(1)}),e.jsx("p",{className:"text-xs text-blue-600",children:"Avg per Session"})]})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-pink-50 to-rose-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx($,{className:"w-5 h-5 text-pink-600"}),e.jsx("h4",{className:"font-semibold text-pink-800",children:"Barre"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-pink-900",children:n.barre.sessions}),e.jsx("p",{className:"text-xs text-pink-600",children:"Sessions"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-pink-900",children:n.barre.attendance}),e.jsx("p",{className:"text-xs text-pink-600",children:"Total Attendance"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-pink-900",children:n.barre.avgAttendance.toFixed(1)}),e.jsx("p",{className:"text-xs text-pink-600",children:"Avg per Session"})]})]})]})]})})]}),e.jsxs(b,{className:"bg-gradient-to-br from-white via-teal-50/30 to-white border-0 shadow-lg lg:col-span-2",children:[e.jsx(C,{className:"pb-4",children:e.jsxs(A,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-teal-600"}),"Trainer Performance Rankings"]})}),e.jsx(w,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-green-700 mb-3 flex items-center gap-1",children:[e.jsx(F,{className:"w-4 h-4"}),"Top Performers"]}),e.jsx("div",{className:"space-y-3",children:a.top.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-bold text-green-600",children:["#",t+1]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 text-sm",children:s.trainer}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.sessions," sessions"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-green-700",children:s.avgAttendance.toFixed(1)}),e.jsx("p",{className:"text-xs text-slate-500",children:"avg attendance"})]})]},s.trainer))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-orange-700 mb-3 flex items-center gap-1",children:[e.jsx(W,{className:"w-4 h-4"}),"Needs Support"]}),e.jsx("div",{className:"space-y-3",children:a.bottom.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-bold text-orange-600",children:["#",t+1]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 text-sm",children:s.trainer}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.sessions," sessions"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-orange-700",children:s.avgAttendance.toFixed(1)}),e.jsx("p",{className:"text-xs text-slate-500",children:"avg attendance"})]})]},s.trainer))})]})]})})]})]})},js=({data:l})=>{const g=te.useMemo(()=>{const a=l.sessions.reduce((n,s)=>{const t=s.cleanedClass||"Unknown";return n[t]||(n[t]={classType:t,totalAttendance:0,sessions:0,avgAttendance:0}),n[t].totalAttendance+=s.checkedInCount||0,n[t].sessions+=1,n},{});return Object.values(a).map(n=>E(L({},n),{avgAttendance:n.sessions>0?n.totalAttendance/n.sessions:0})).sort((n,s)=>s.totalAttendance-n.totalAttendance).slice(0,5).map((n,s)=>E(L({},n),{rank:s+1}))},[l.sessions]),c=te.useMemo(()=>{const a=l.sales.reduce((n,s)=>{const t=s.paymentItem||"Unknown";return n[t]||(n[t]={product:t,revenue:0,transactions:0}),n[t].revenue+=s.paymentValue||0,n[t].transactions+=1,n},{});return Object.values(a).sort((n,s)=>s.revenue-n.revenue).slice(0,5).map((n,s)=>E(L({},n),{rank:s+1}))},[l.sales]),h=te.useMemo(()=>l.sessions.sort((a,n)=>(n.checkedInCount||0)-(a.checkedInCount||0)).slice(0,5).map((a,n)=>E(L({},a),{rank:n+1})),[l.sessions]),f=te.useMemo(()=>l.newClients.filter(a=>a.ltv>0).sort((a,n)=>(n.ltv||0)-(a.ltv||0)).slice(0,5).map((a,n)=>E(L({},a),{rank:n+1})),[l.newClients]),d=({rank:a})=>{const n=()=>{switch(a){case 1:return e.jsx(Ue,{className:"w-3 h-3"});case 2:return e.jsx(Oe,{className:"w-3 h-3"});case 3:return e.jsx(Ie,{className:"w-3 h-3"});default:return e.jsx(Ce,{className:"w-3 h-3"})}},s=()=>{switch(a){case 1:return"bg-yellow-500 text-yellow-50";case 2:return"bg-gray-400 text-gray-50";case 3:return"bg-amber-600 text-amber-50";default:return"bg-blue-500 text-blue-50"}};return e.jsxs(y,{className:`${s()} font-bold`,children:[n(),"#",a]})};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(b,{className:"shadow-xl border-0",children:[e.jsx(C,{className:"bg-gradient-to-r from-purple-600 to-violet-600 text-white",children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"Top Class Types by Attendance",e.jsx(y,{className:"bg-white/20 text-white",children:"Previous Month"})]})}),e.jsx(w,{className:"p-6 space-y-4",children:g.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{rank:a.rank}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a.classType}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.sessions," sessions"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-lg",children:G(a.totalAttendance)}),e.jsx("p",{className:"text-sm text-gray-600",children:"total attendance"})]})]},a.classType))})]}),e.jsxs(b,{className:"shadow-xl border-0",children:[e.jsx(C,{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white",children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"Top Products by Revenue",e.jsx(y,{className:"bg-white/20 text-white",children:"Previous Month"})]})}),e.jsx(w,{className:"p-6 space-y-4",children:c.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{rank:a.rank}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a.product}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.transactions," transactions"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-bold text-lg",children:P(a.revenue)})})]},a.product))})]}),e.jsxs(b,{className:"shadow-xl border-0",children:[e.jsx(C,{className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white",children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Top Sessions by Attendance",e.jsx(y,{className:"bg-white/20 text-white",children:"Previous Month"})]})}),e.jsx(w,{className:"p-6 space-y-4",children:h.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{rank:a.rank}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a.cleanedClass}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.trainerName," • ",a.date]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-lg",children:a.checkedInCount||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"attendees"})]})]},a.sessionId))})]}),e.jsxs(b,{className:"shadow-xl border-0",children:[e.jsx(C,{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white",children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),"Top Clients by LTV",e.jsx(y,{className:"bg-white/20 text-white",children:"Previous Month"})]})}),e.jsx(w,{className:"p-6 space-y-4",children:f.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{rank:a.rank}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:[a.firstName," ",a.lastName]}),e.jsx("p",{className:"text-sm text-gray-600",children:a.homeLocation})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-lg",children:P(a.ltv||0)}),e.jsx("p",{className:"text-sm text-gray-600",children:"LTV"})]})]},a.memberId))})]})]})},vs=({availableLocations:l})=>{var t,i;const[g,c]=v.useState(!1),{filters:h,updateFilters:f,clearFilters:d}=Te(),a=r=>{const o=Array.isArray(h.location)?h.location:[];if(r==="all")f({location:[]});else{const u=o.includes(r);f(u?{location:o.filter(S=>S!==r)}:{location:[r]})}},n=Array.isArray(h.location)?h.location[0]:h.location,s=h.location&&h.location.length>0;return e.jsx(b,{className:"bg-white/95 backdrop-blur-sm shadow-xl border-0",children:e.jsxs(We,{open:g,onOpenChange:c,children:[e.jsx(Ze,{asChild:!0,children:e.jsx(C,{className:"cursor-pointer hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(A,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(Ge,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Filters & Controls"}),e.jsxs("p",{className:"text-sm text-gray-600 font-normal",children:["Data filtered for ",ge(),n&&` • ${n}`]})]}),s&&e.jsxs(y,{className:"bg-blue-100 text-blue-800 ml-2",children:[((t=h.location)==null?void 0:t.length)||0," filter",((i=h.location)==null?void 0:i.length)!==1?"s":""," active"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s&&e.jsxs(z,{variant:"outline",size:"sm",onClick:r=>{r.stopPropagation(),d()},className:"text-gray-600 hover:text-red-600",children:[e.jsx(Ke,{className:"w-4 h-4 mr-1"}),"Clear"]}),g?e.jsx($e,{className:"w-5 h-5 text-gray-500"}):e.jsx(ze,{className:"w-5 h-5 text-gray-500"})]})]})})}),e.jsx(_e,{children:e.jsxs(w,{className:"pt-0 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx(xe,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Date Range"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Showing data for ",ge()," (Previous Month)"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Location Filter"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(z,{variant:n?"outline":"default",size:"sm",onClick:()=>a("all"),className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"All Locations"]}),l.map(r=>e.jsxs(z,{variant:n===r?"default":"outline",size:"sm",onClick:()=>a(r),className:"flex items-center gap-2",children:[r,n===r&&e.jsx(y,{className:"bg-white/20 text-current ml-1",children:"Active"})]},r))]})]}),s&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Active Filters Summary"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsxs("span",{children:["Location: ",n||"All"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsxs("span",{children:["Period: ",ge()]})]})]})]})]})})]})})},fs=()=>{const[l,g]=v.useState(!1),[c,h]=v.useState("overview"),[f,d]=v.useState(!1),a=v.useRef(null),{filters:n}=Te(),{setLoading:s}=ts(),{data:t,loading:i}=as(),{data:r,loading:o}=ns(),{data:u,isLoading:S}=ls(),{data:k,loading:_}=rs(),{data:O,loading:J}=is(),{data:V,loading:me}=os(),Y=i||o||S||_||J||me;v.useEffect(()=>{s(Y,"Loading executive dashboard overview...")},[Y,s]);const Q=v.useMemo(()=>{const p=new Set;return t==null||t.forEach(j=>{j.calculatedLocation&&p.add(j.calculatedLocation)}),r==null||r.forEach(j=>{j.location&&p.add(j.location)}),k==null||k.forEach(j=>{j.homeLocation&&p.add(j.homeLocation)}),u==null||u.forEach(j=>{j.location&&p.add(j.location)}),Array.from(p).sort()},[t,r,k,u]),x=v.useMemo(()=>{const p=new Date,j=new Date(p.getFullYear(),p.getMonth()-1,1),se=new Date(p.getFullYear(),p.getMonth(),1),M=N=>{const R=new Date(N);return R>=j&&R<se},m=(N,R)=>{if(!n.location||n.location.length===0)return N;const X=Array.isArray(n.location)?n.location[0]:n.location;return N.filter(Me=>Me[R]===X)},T=m((t==null?void 0:t.filter(N=>M(N.paymentDate)))||[],"calculatedLocation"),B=m((r==null?void 0:r.filter(N=>M(N.date)))||[],"location"),ke=m((u==null?void 0:u.filter(N=>{const R=N.monthYear,X=j.toLocaleDateString("en-US",{month:"short",year:"numeric"});return R===X}))||[],"location"),Se=m((k==null?void 0:k.filter(N=>M(N.firstVisitDate)))||[],"homeLocation"),Le=`${j.getFullYear()}-${String(j.getMonth()+1).padStart(2,"0")}`,Pe=m((O==null?void 0:O.filter(N=>{const R=N.createdAt?M(N.createdAt):!1,X=N.period?N.period===Le:!1;return R||X}))||[],"center"),De=m((V==null?void 0:V.filter(N=>M(N.paymentDate)))||[],"location");return{sales:T,sessions:B,payroll:ke,newClients:Se,leads:Pe,discounts:De}},[t,r,u,k,O,V,n.location]);if(Y)return null;const D=Array.isArray(n.location)?n.location[0]:n.location,ee=()=>{if(a.current)if(f)a.current.pause(),d(!1);else{const p=D==="Kwality House"?"/kwality-house-audio.mp3":"/placeholder-audio.mp3";a.current.src=p,a.current.play(),d(!0)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50/30 to-pink-50/20 p-6",children:[e.jsxs("audio",{ref:a,onEnded:()=>d(!1),preload:"metadata",children:[e.jsx("source",{src:"/placeholder-audio.mp3",type:"audio/mpeg"}),"Your browser does not support the audio element."]}),e.jsxs("div",{className:"max-w-[1600px] mx-auto space-y-8",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-indigo-900 via-purple-800 to-indigo-700 rounded-3xl text-white shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-4 -left-4 w-32 h-32 bg-white/10 rounded-full animate-pulse"}),e.jsx("div",{className:"absolute top-20 right-10 w-24 h-24 bg-indigo-300/20 rounded-full animate-bounce delay-1000"}),e.jsx("div",{className:"absolute bottom-10 left-20 w-40 h-40 bg-purple-300/10 rounded-full animate-pulse delay-500"})]}),e.jsx("div",{className:"relative p-12",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-full px-6 py-3 border border-white/20 animate-fade-in-up",children:[e.jsx(je,{className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold text-lg",children:"Executive Dashboard"})]}),e.jsx("h1",{className:"text-6xl md:text-7xl font-bold bg-gradient-to-r from-white via-indigo-100 to-purple-100 bg-clip-text text-transparent animate-fade-in-up delay-200",children:"Executive Overview"}),e.jsxs("p",{className:"text-xl text-indigo-100 max-w-4xl mx-auto leading-relaxed animate-fade-in-up delay-300",children:["Comprehensive real-time insights across Sales, Leads, Sessions, Trainers, and Client Conversions",D&&` - ${D}`]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 animate-fade-in-up delay-400",children:[e.jsxs(y,{className:"bg-white/10 text-white border-white/20 px-4 py-2",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Previous Month Data"]}),e.jsxs(y,{className:"bg-green-500/20 text-green-100 border-green-400/30 px-4 py-2",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Live Analytics"]}),e.jsxs(y,{className:"bg-blue-500/20 text-blue-100 border-blue-400/30 px-4 py-2",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),x.sales.length+x.sessions.length+x.newClients.length," Records"]})]}),e.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[e.jsxs(z,{onClick:ee,className:"bg-white/10 hover:bg-white/20 text-white border border-white/20 backdrop-blur-sm px-6 py-3 rounded-full text-lg font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",children:[f?e.jsx(Ye,{className:"w-5 h-5 mr-2"}):e.jsx(Xe,{className:"w-5 h-5 mr-2"}),f?"Pause":"Play"]}),e.jsx(Je,{salesData:x.sales,sessionsData:x.sessions,newClientData:x.newClients,payrollData:x.payroll,lateCancellationsData:[],discountData:x.discounts,defaultFileName:"executive-dashboard-export",size:"lg",variant:"outline"}),e.jsxs(z,{onClick:()=>window.location.href="/",className:"bg-white/10 hover:bg-white/20 text-white border border-white/20 backdrop-blur-sm px-6 py-3 rounded-full text-lg font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",children:[e.jsx(qe,{className:"w-5 h-5 mr-2"}),"Back to Main Dashboard"]})]})]})})]}),e.jsx(vs,{availableLocations:Q}),e.jsx(gs,{data:x}),e.jsx(be,{data:x}),e.jsxs(b,{className:"bg-white/90 backdrop-blur-sm shadow-2xl border-0 overflow-hidden",children:[e.jsx(C,{className:"bg-gradient-to-r from-slate-900 via-blue-900 to-purple-900 text-white border-0",children:e.jsxs(A,{className:"text-2xl font-bold flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:e.jsx(F,{className:"w-6 h-6"})}),"Comprehensive Performance Analytics",e.jsx(y,{className:"bg-white/20 text-white backdrop-blur-sm px-3 py-1",children:"15+ Data Tables"})]})}),e.jsx(w,{className:"p-8",children:e.jsxs(Qe,{value:c,onValueChange:h,className:"w-full",children:[e.jsxs(es,{className:"bg-white/90 backdrop-blur-sm p-2 rounded-2xl shadow-xl border-0 grid grid-cols-5 w-full max-w-6xl mx-auto overflow-hidden mb-8",children:[e.jsxs(q,{value:"overview",className:"relative rounded-xl px-4 py-3 font-semibold text-sm transition-all duration-300 ease-out hover:scale-105 data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Data Tables"]}),e.jsxs(q,{value:"performers",className:"relative rounded-xl px-4 py-3 font-semibold text-sm transition-all duration-300 ease-out hover:scale-105 data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Top Performers"]}),e.jsxs(q,{value:"trends",className:"relative rounded-xl px-4 py-3 font-semibold text-sm transition-all duration-300 ease-out hover:scale-105 data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Trend Analysis"]}),e.jsxs(q,{value:"discounts",className:"relative rounded-xl px-4 py-3 font-semibold text-sm transition-all duration-300 ease-out hover:scale-105 data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Discounts"]}),e.jsxs(q,{value:"insights",className:"relative rounded-xl px-4 py-3 font-semibold text-sm transition-all duration-300 ease-out hover:scale-105 data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Insights"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{value:"overview",className:"space-y-6 mt-0",children:e.jsx(ps,{data:x,selectedLocation:D})}),e.jsx(H,{value:"performers",className:"space-y-6 mt-0",children:e.jsx(js,{data:x})}),e.jsx(H,{value:"trends",className:"space-y-6 mt-0",children:e.jsx(be,{data:x,showTrends:!0})}),e.jsxs(H,{value:"discounts",className:"space-y-6 mt-0",children:[e.jsx(hs,{data:x.sales,selectedLocation:D}),e.jsx(us,{data:{sessions:x.sessions,payroll:x.payroll,sales:x.sales}})]}),e.jsx(H,{value:"insights",className:"space-y-6 mt-0",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(b,{className:"bg-gradient-to-br from-blue-50 to-indigo-100 border-blue-200",children:[e.jsx(C,{children:e.jsx(A,{className:"text-blue-800",children:"Key Performance Insights"})}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg",children:[e.jsx(F,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Total Revenue: $",x.sales.reduce((p,j)=>p+j.paymentValue,0).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg",children:[e.jsx(I,{className:"w-5 h-5 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["New Clients: ",x.newClients.length]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg",children:[e.jsx(Z,{className:"w-5 h-5 text-purple-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Total Sessions: ",x.sessions.length]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg",children:[e.jsx(ce,{className:"w-5 h-5 text-orange-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Discount Transactions: ",x.discounts.length]})]})]})]}),e.jsxs(b,{className:"bg-gradient-to-br from-green-50 to-emerald-100 border-green-200",children:[e.jsx(C,{children:e.jsx(A,{className:"text-green-800",children:"Action Items"})}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg",children:[e.jsx(ye,{className:"w-5 h-5 text-orange-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Sessions with low attendance: ",x.sessions.filter(p=>p.checkedInCount<p.capacity*.5).length]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg",children:[e.jsx(W,{className:"w-5 h-5 text-red-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Empty sessions: ",x.sessions.filter(p=>p.checkedInCount===0).length]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg",children:[e.jsx(de,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Lead conversion rate: ",x.leads.length>0?(x.leads.filter(p=>p.conversionStatus==="Converted").length/x.leads.length*100).toFixed(1):"0","%"]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg",children:[e.jsx(K,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Total Discount Amount: $",x.discounts.reduce((p,j)=>p+j.discountAmount,0).toLocaleString()]})]})]})]})]})})]})]})})]}),l&&e.jsx(ss,{open:l,onOpenChange:g,sources:[{name:"Sales Data (Previous Month)",data:x.sales},{name:"Sessions Data (Previous Month)",data:x.sessions},{name:"New Clients Data (Previous Month)",data:x.newClients},{name:"Leads Data (Previous Month)",data:x.leads},{name:"Payroll Data (Previous Month)",data:x.payroll},{name:"Discounts Data (Previous Month)",data:x.discounts}]})]}),e.jsx("style",{children:`
        @keyframes fade-in-up {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        .animate-fade-in-up {
          animation: fade-in-up 0.6s ease-out forwards;
        }
        
        .delay-200 {
          animation-delay: 0.2s;
        }
        
        .delay-300 {
          animation-delay: 0.3s;
        }
        
        .delay-400 {
          animation-delay: 0.4s;
        }
      `})]})},Ls=()=>e.jsx(fs,{});export{Ls as E,Ss as G,Te as u};
